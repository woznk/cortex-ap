<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ST-TIM: src/stm32f10x_tim.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>src/stm32f10x_tim.c</h1><a href="stm32f10x__tim_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00021"></a>00021 <span class="comment">/* Includes ------------------------------------------------------------------*/</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;stm32f10x_tim.h&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;stm32f10x_rcc.h&quot;</span>
<a name="l00024"></a>00024 
<a name="l00046"></a>00046 <span class="comment">/* ---------------------- TIM registers bit mask ------------------------ */</span>
<a name="l00047"></a>00047 <span class="preprocessor">#define SMCR_ETR_Mask               ((uint16_t)0x00FF) </span>
<a name="l00048"></a>00048 <span class="preprocessor"></span><span class="preprocessor">#define CCMR_Offset                 ((uint16_t)0x0018)</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span><span class="preprocessor">#define CCER_CCE_Set                ((uint16_t)0x0001)  </span>
<a name="l00050"></a>00050 <span class="preprocessor"></span><span class="preprocessor">#define CCER_CCNE_Set               ((uint16_t)0x0004) </span>
<a name="l00051"></a>00051 <span class="preprocessor"></span>
<a name="l00076"></a>00076 <span class="keyword">static</span> <span class="keywordtype">void</span> TI1_Config(TIM_TypeDef* TIMx, uint16_t TIM_ICPolarity, uint16_t TIM_ICSelection,
<a name="l00077"></a>00077                        uint16_t TIM_ICFilter);
<a name="l00078"></a>00078 <span class="keyword">static</span> <span class="keywordtype">void</span> TI2_Config(TIM_TypeDef* TIMx, uint16_t TIM_ICPolarity, uint16_t TIM_ICSelection,
<a name="l00079"></a>00079                        uint16_t TIM_ICFilter);
<a name="l00080"></a>00080 <span class="keyword">static</span> <span class="keywordtype">void</span> TI3_Config(TIM_TypeDef* TIMx, uint16_t TIM_ICPolarity, uint16_t TIM_ICSelection,
<a name="l00081"></a>00081                        uint16_t TIM_ICFilter);
<a name="l00082"></a>00082 <span class="keyword">static</span> <span class="keywordtype">void</span> TI4_Config(TIM_TypeDef* TIMx, uint16_t TIM_ICPolarity, uint16_t TIM_ICSelection,
<a name="l00083"></a>00083                        uint16_t TIM_ICFilter);
<a name="l00121"></a><a class="code" href="group___t_i_m___private___functions.html#ga1659cc0ce503ac151568e0c7c02b1ba5">00121</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga1659cc0ce503ac151568e0c7c02b1ba5" title="Deinitializes the TIMx peripheral registers to their default reset values.">TIM_DeInit</a>(TIM_TypeDef* TIMx)
<a name="l00122"></a>00122 {
<a name="l00123"></a>00123   <span class="comment">/* Check the parameters */</span>
<a name="l00124"></a>00124   assert_param(IS_TIM_ALL_PERIPH(TIMx)); 
<a name="l00125"></a>00125  
<a name="l00126"></a>00126   <span class="keywordflow">if</span> (TIMx == TIM1)
<a name="l00127"></a>00127   {
<a name="l00128"></a>00128     RCC_APB2PeriphResetCmd(RCC_APB2Periph_TIM1, ENABLE);
<a name="l00129"></a>00129     RCC_APB2PeriphResetCmd(RCC_APB2Periph_TIM1, DISABLE);  
<a name="l00130"></a>00130   }     
<a name="l00131"></a>00131   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TIMx == TIM2)
<a name="l00132"></a>00132   {
<a name="l00133"></a>00133     RCC_APB1PeriphResetCmd(RCC_APB1Periph_TIM2, ENABLE);
<a name="l00134"></a>00134     RCC_APB1PeriphResetCmd(RCC_APB1Periph_TIM2, DISABLE);
<a name="l00135"></a>00135   }
<a name="l00136"></a>00136   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TIMx == TIM3)
<a name="l00137"></a>00137   {
<a name="l00138"></a>00138     RCC_APB1PeriphResetCmd(RCC_APB1Periph_TIM3, ENABLE);
<a name="l00139"></a>00139     RCC_APB1PeriphResetCmd(RCC_APB1Periph_TIM3, DISABLE);
<a name="l00140"></a>00140   }
<a name="l00141"></a>00141   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TIMx == TIM4)
<a name="l00142"></a>00142   {
<a name="l00143"></a>00143     RCC_APB1PeriphResetCmd(RCC_APB1Periph_TIM4, ENABLE);
<a name="l00144"></a>00144     RCC_APB1PeriphResetCmd(RCC_APB1Periph_TIM4, DISABLE);
<a name="l00145"></a>00145   } 
<a name="l00146"></a>00146   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TIMx == TIM5)
<a name="l00147"></a>00147   {
<a name="l00148"></a>00148     RCC_APB1PeriphResetCmd(RCC_APB1Periph_TIM5, ENABLE);
<a name="l00149"></a>00149     RCC_APB1PeriphResetCmd(RCC_APB1Periph_TIM5, DISABLE);
<a name="l00150"></a>00150   } 
<a name="l00151"></a>00151   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TIMx == TIM6)
<a name="l00152"></a>00152   {
<a name="l00153"></a>00153     RCC_APB1PeriphResetCmd(RCC_APB1Periph_TIM6, ENABLE);
<a name="l00154"></a>00154     RCC_APB1PeriphResetCmd(RCC_APB1Periph_TIM6, DISABLE);
<a name="l00155"></a>00155   } 
<a name="l00156"></a>00156   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TIMx == TIM7)
<a name="l00157"></a>00157   {
<a name="l00158"></a>00158     RCC_APB1PeriphResetCmd(RCC_APB1Periph_TIM7, ENABLE);
<a name="l00159"></a>00159     RCC_APB1PeriphResetCmd(RCC_APB1Periph_TIM7, DISABLE);
<a name="l00160"></a>00160   } 
<a name="l00161"></a>00161   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TIMx == TIM8)
<a name="l00162"></a>00162   {
<a name="l00163"></a>00163     RCC_APB2PeriphResetCmd(RCC_APB2Periph_TIM8, ENABLE);
<a name="l00164"></a>00164     RCC_APB2PeriphResetCmd(RCC_APB2Periph_TIM8, DISABLE);
<a name="l00165"></a>00165   }
<a name="l00166"></a>00166   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TIMx == TIM9)
<a name="l00167"></a>00167   {      
<a name="l00168"></a>00168     RCC_APB2PeriphResetCmd(RCC_APB2Periph_TIM9, ENABLE);
<a name="l00169"></a>00169     RCC_APB2PeriphResetCmd(RCC_APB2Periph_TIM9, DISABLE);  
<a name="l00170"></a>00170    }  
<a name="l00171"></a>00171   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TIMx == TIM10)
<a name="l00172"></a>00172   {      
<a name="l00173"></a>00173     RCC_APB2PeriphResetCmd(RCC_APB2Periph_TIM10, ENABLE);
<a name="l00174"></a>00174     RCC_APB2PeriphResetCmd(RCC_APB2Periph_TIM10, DISABLE);  
<a name="l00175"></a>00175   }  
<a name="l00176"></a>00176   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TIMx == TIM11) 
<a name="l00177"></a>00177   {     
<a name="l00178"></a>00178     RCC_APB2PeriphResetCmd(RCC_APB2Periph_TIM11, ENABLE);
<a name="l00179"></a>00179     RCC_APB2PeriphResetCmd(RCC_APB2Periph_TIM11, DISABLE);  
<a name="l00180"></a>00180   }  
<a name="l00181"></a>00181   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TIMx == TIM12)
<a name="l00182"></a>00182   {      
<a name="l00183"></a>00183     RCC_APB1PeriphResetCmd(RCC_APB1Periph_TIM12, ENABLE);
<a name="l00184"></a>00184     RCC_APB1PeriphResetCmd(RCC_APB1Periph_TIM12, DISABLE);  
<a name="l00185"></a>00185   }  
<a name="l00186"></a>00186   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TIMx == TIM13) 
<a name="l00187"></a>00187   {       
<a name="l00188"></a>00188     RCC_APB1PeriphResetCmd(RCC_APB1Periph_TIM13, ENABLE);
<a name="l00189"></a>00189     RCC_APB1PeriphResetCmd(RCC_APB1Periph_TIM13, DISABLE);  
<a name="l00190"></a>00190   }
<a name="l00191"></a>00191   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TIMx == TIM14) 
<a name="l00192"></a>00192   {       
<a name="l00193"></a>00193     RCC_APB1PeriphResetCmd(RCC_APB1Periph_TIM14, ENABLE);
<a name="l00194"></a>00194     RCC_APB1PeriphResetCmd(RCC_APB1Periph_TIM14, DISABLE);  
<a name="l00195"></a>00195   }        
<a name="l00196"></a>00196   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TIMx == TIM15)
<a name="l00197"></a>00197   {
<a name="l00198"></a>00198     RCC_APB2PeriphResetCmd(RCC_APB2Periph_TIM15, ENABLE);
<a name="l00199"></a>00199     RCC_APB2PeriphResetCmd(RCC_APB2Periph_TIM15, DISABLE);
<a name="l00200"></a>00200   } 
<a name="l00201"></a>00201   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TIMx == TIM16)
<a name="l00202"></a>00202   {
<a name="l00203"></a>00203     RCC_APB2PeriphResetCmd(RCC_APB2Periph_TIM16, ENABLE);
<a name="l00204"></a>00204     RCC_APB2PeriphResetCmd(RCC_APB2Periph_TIM16, DISABLE);
<a name="l00205"></a>00205   } 
<a name="l00206"></a>00206   <span class="keywordflow">else</span>
<a name="l00207"></a>00207   {
<a name="l00208"></a>00208     <span class="keywordflow">if</span> (TIMx == TIM17)
<a name="l00209"></a>00209     {
<a name="l00210"></a>00210       RCC_APB2PeriphResetCmd(RCC_APB2Periph_TIM17, ENABLE);
<a name="l00211"></a>00211       RCC_APB2PeriphResetCmd(RCC_APB2Periph_TIM17, DISABLE);
<a name="l00212"></a>00212     }  
<a name="l00213"></a>00213   }
<a name="l00214"></a>00214 }
<a name="l00215"></a>00215 
<a name="l00224"></a><a class="code" href="group___t_i_m___private___functions.html#ga83fd58c9416802d9638bbe1715c98932">00224</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga83fd58c9416802d9638bbe1715c98932" title="Initializes the TIMx Time Base Unit peripheral according to the specified parameters...">TIM_TimeBaseInit</a>(TIM_TypeDef* TIMx, TIM_TimeBaseInitTypeDef* TIM_TimeBaseInitStruct)
<a name="l00225"></a>00225 {
<a name="l00226"></a>00226   uint16_t tmpcr1 = 0;
<a name="l00227"></a>00227 
<a name="l00228"></a>00228   <span class="comment">/* Check the parameters */</span>
<a name="l00229"></a>00229   assert_param(IS_TIM_ALL_PERIPH(TIMx)); 
<a name="l00230"></a>00230   assert_param(IS_TIM_COUNTER_MODE(TIM_TimeBaseInitStruct-&gt;TIM_CounterMode));
<a name="l00231"></a>00231   assert_param(IS_TIM_CKD_DIV(TIM_TimeBaseInitStruct-&gt;TIM_ClockDivision));
<a name="l00232"></a>00232 
<a name="l00233"></a>00233   tmpcr1 = TIMx-&gt;CR1;  
<a name="l00234"></a>00234 
<a name="l00235"></a>00235   <span class="keywordflow">if</span>((TIMx == TIM1) || (TIMx == TIM8)|| (TIMx == TIM2) || (TIMx == TIM3)||
<a name="l00236"></a>00236      (TIMx == TIM4) || (TIMx == TIM5)) 
<a name="l00237"></a>00237   {
<a name="l00238"></a>00238     <span class="comment">/* Select the Counter Mode */</span>
<a name="l00239"></a>00239     tmpcr1 &amp;= (uint16_t)(~((uint16_t)(TIM_CR1_DIR | TIM_CR1_CMS)));
<a name="l00240"></a>00240     tmpcr1 |= (uint32_t)TIM_TimeBaseInitStruct-&gt;TIM_CounterMode;
<a name="l00241"></a>00241   }
<a name="l00242"></a>00242  
<a name="l00243"></a>00243   <span class="keywordflow">if</span>((TIMx != TIM6) &amp;&amp; (TIMx != TIM7))
<a name="l00244"></a>00244   {
<a name="l00245"></a>00245     <span class="comment">/* Set the clock division */</span>
<a name="l00246"></a>00246     tmpcr1 &amp;= (uint16_t)(~((uint16_t)TIM_CR1_CKD));
<a name="l00247"></a>00247     tmpcr1 |= (uint32_t)TIM_TimeBaseInitStruct-&gt;TIM_ClockDivision;
<a name="l00248"></a>00248   }
<a name="l00249"></a>00249 
<a name="l00250"></a>00250   TIMx-&gt;CR1 = tmpcr1;
<a name="l00251"></a>00251 
<a name="l00252"></a>00252   <span class="comment">/* Set the Autoreload value */</span>
<a name="l00253"></a>00253   TIMx-&gt;ARR = TIM_TimeBaseInitStruct-&gt;TIM_Period ;
<a name="l00254"></a>00254  
<a name="l00255"></a>00255   <span class="comment">/* Set the Prescaler value */</span>
<a name="l00256"></a>00256   TIMx-&gt;PSC = TIM_TimeBaseInitStruct-&gt;TIM_Prescaler;
<a name="l00257"></a>00257     
<a name="l00258"></a>00258   <span class="keywordflow">if</span> ((TIMx == TIM1) || (TIMx == TIM8)|| (TIMx == TIM15)|| (TIMx == TIM16) || (TIMx == TIM17))  
<a name="l00259"></a>00259   {
<a name="l00260"></a>00260     <span class="comment">/* Set the Repetition Counter value */</span>
<a name="l00261"></a>00261     TIMx-&gt;RCR = TIM_TimeBaseInitStruct-&gt;TIM_RepetitionCounter;
<a name="l00262"></a>00262   }
<a name="l00263"></a>00263 
<a name="l00264"></a>00264   <span class="comment">/* Generate an update event to reload the Prescaler and the Repetition counter</span>
<a name="l00265"></a>00265 <span class="comment">     values immediately */</span>
<a name="l00266"></a>00266   TIMx-&gt;EGR = TIM_PSCReloadMode_Immediate;           
<a name="l00267"></a>00267 }
<a name="l00268"></a>00268 
<a name="l00277"></a><a class="code" href="group___t_i_m___private___functions.html#gafcdb6ff00158862aef7fed5e7a554a3e">00277</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#gafcdb6ff00158862aef7fed5e7a554a3e" title="Initializes the TIMx Channel1 according to the specified parameters in the TIM_OCInitStruct...">TIM_OC1Init</a>(TIM_TypeDef* TIMx, TIM_OCInitTypeDef* TIM_OCInitStruct)
<a name="l00278"></a>00278 {
<a name="l00279"></a>00279   uint16_t tmpccmrx = 0, tmpccer = 0, tmpcr2 = 0;
<a name="l00280"></a>00280    
<a name="l00281"></a>00281   <span class="comment">/* Check the parameters */</span>
<a name="l00282"></a>00282   assert_param(IS_TIM_LIST8_PERIPH(TIMx));
<a name="l00283"></a>00283   assert_param(IS_TIM_OC_MODE(TIM_OCInitStruct-&gt;TIM_OCMode));
<a name="l00284"></a>00284   assert_param(IS_TIM_OUTPUT_STATE(TIM_OCInitStruct-&gt;TIM_OutputState));
<a name="l00285"></a>00285   assert_param(IS_TIM_OC_POLARITY(TIM_OCInitStruct-&gt;TIM_OCPolarity));   
<a name="l00286"></a>00286  <span class="comment">/* Disable the Channel 1: Reset the CC1E Bit */</span>
<a name="l00287"></a>00287   TIMx-&gt;CCER &amp;= (uint16_t)(~(uint16_t)TIM_CCER_CC1E);
<a name="l00288"></a>00288   <span class="comment">/* Get the TIMx CCER register value */</span>
<a name="l00289"></a>00289   tmpccer = TIMx-&gt;CCER;
<a name="l00290"></a>00290   <span class="comment">/* Get the TIMx CR2 register value */</span>
<a name="l00291"></a>00291   tmpcr2 =  TIMx-&gt;CR2;
<a name="l00292"></a>00292   
<a name="l00293"></a>00293   <span class="comment">/* Get the TIMx CCMR1 register value */</span>
<a name="l00294"></a>00294   tmpccmrx = TIMx-&gt;CCMR1;
<a name="l00295"></a>00295     
<a name="l00296"></a>00296   <span class="comment">/* Reset the Output Compare Mode Bits */</span>
<a name="l00297"></a>00297   tmpccmrx &amp;= (uint16_t)(~((uint16_t)TIM_CCMR1_OC1M));
<a name="l00298"></a>00298   tmpccmrx &amp;= (uint16_t)(~((uint16_t)TIM_CCMR1_CC1S));
<a name="l00299"></a>00299 
<a name="l00300"></a>00300   <span class="comment">/* Select the Output Compare Mode */</span>
<a name="l00301"></a>00301   tmpccmrx |= TIM_OCInitStruct-&gt;TIM_OCMode;
<a name="l00302"></a>00302   
<a name="l00303"></a>00303   <span class="comment">/* Reset the Output Polarity level */</span>
<a name="l00304"></a>00304   tmpccer &amp;= (uint16_t)(~((uint16_t)TIM_CCER_CC1P));
<a name="l00305"></a>00305   <span class="comment">/* Set the Output Compare Polarity */</span>
<a name="l00306"></a>00306   tmpccer |= TIM_OCInitStruct-&gt;TIM_OCPolarity;
<a name="l00307"></a>00307   
<a name="l00308"></a>00308   <span class="comment">/* Set the Output State */</span>
<a name="l00309"></a>00309   tmpccer |= TIM_OCInitStruct-&gt;TIM_OutputState;
<a name="l00310"></a>00310     
<a name="l00311"></a>00311   <span class="keywordflow">if</span>((TIMx == TIM1) || (TIMx == TIM8)|| (TIMx == TIM15)||
<a name="l00312"></a>00312      (TIMx == TIM16)|| (TIMx == TIM17))
<a name="l00313"></a>00313   {
<a name="l00314"></a>00314     assert_param(IS_TIM_OUTPUTN_STATE(TIM_OCInitStruct-&gt;TIM_OutputNState));
<a name="l00315"></a>00315     assert_param(IS_TIM_OCN_POLARITY(TIM_OCInitStruct-&gt;TIM_OCNPolarity));
<a name="l00316"></a>00316     assert_param(IS_TIM_OCNIDLE_STATE(TIM_OCInitStruct-&gt;TIM_OCNIdleState));
<a name="l00317"></a>00317     assert_param(IS_TIM_OCIDLE_STATE(TIM_OCInitStruct-&gt;TIM_OCIdleState));
<a name="l00318"></a>00318     
<a name="l00319"></a>00319     <span class="comment">/* Reset the Output N Polarity level */</span>
<a name="l00320"></a>00320     tmpccer &amp;= (uint16_t)(~((uint16_t)TIM_CCER_CC1NP));
<a name="l00321"></a>00321     <span class="comment">/* Set the Output N Polarity */</span>
<a name="l00322"></a>00322     tmpccer |= TIM_OCInitStruct-&gt;TIM_OCNPolarity;
<a name="l00323"></a>00323     
<a name="l00324"></a>00324     <span class="comment">/* Reset the Output N State */</span>
<a name="l00325"></a>00325     tmpccer &amp;= (uint16_t)(~((uint16_t)TIM_CCER_CC1NE));    
<a name="l00326"></a>00326     <span class="comment">/* Set the Output N State */</span>
<a name="l00327"></a>00327     tmpccer |= TIM_OCInitStruct-&gt;TIM_OutputNState;
<a name="l00328"></a>00328     
<a name="l00329"></a>00329     <span class="comment">/* Reset the Ouput Compare and Output Compare N IDLE State */</span>
<a name="l00330"></a>00330     tmpcr2 &amp;= (uint16_t)(~((uint16_t)TIM_CR2_OIS1));
<a name="l00331"></a>00331     tmpcr2 &amp;= (uint16_t)(~((uint16_t)TIM_CR2_OIS1N));
<a name="l00332"></a>00332     
<a name="l00333"></a>00333     <span class="comment">/* Set the Output Idle state */</span>
<a name="l00334"></a>00334     tmpcr2 |= TIM_OCInitStruct-&gt;TIM_OCIdleState;
<a name="l00335"></a>00335     <span class="comment">/* Set the Output N Idle state */</span>
<a name="l00336"></a>00336     tmpcr2 |= TIM_OCInitStruct-&gt;TIM_OCNIdleState;
<a name="l00337"></a>00337   }
<a name="l00338"></a>00338   <span class="comment">/* Write to TIMx CR2 */</span>
<a name="l00339"></a>00339   TIMx-&gt;CR2 = tmpcr2;
<a name="l00340"></a>00340   
<a name="l00341"></a>00341   <span class="comment">/* Write to TIMx CCMR1 */</span>
<a name="l00342"></a>00342   TIMx-&gt;CCMR1 = tmpccmrx;
<a name="l00343"></a>00343 
<a name="l00344"></a>00344   <span class="comment">/* Set the Capture Compare Register value */</span>
<a name="l00345"></a>00345   TIMx-&gt;CCR1 = TIM_OCInitStruct-&gt;TIM_Pulse; 
<a name="l00346"></a>00346  
<a name="l00347"></a>00347   <span class="comment">/* Write to TIMx CCER */</span>
<a name="l00348"></a>00348   TIMx-&gt;CCER = tmpccer;
<a name="l00349"></a>00349 }
<a name="l00350"></a>00350 
<a name="l00360"></a><a class="code" href="group___t_i_m___private___functions.html#ga2017455121d910d6ff63ac6f219842c5">00360</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga2017455121d910d6ff63ac6f219842c5" title="Initializes the TIMx Channel2 according to the specified parameters in the TIM_OCInitStruct...">TIM_OC2Init</a>(TIM_TypeDef* TIMx, TIM_OCInitTypeDef* TIM_OCInitStruct)
<a name="l00361"></a>00361 {
<a name="l00362"></a>00362   uint16_t tmpccmrx = 0, tmpccer = 0, tmpcr2 = 0;
<a name="l00363"></a>00363    
<a name="l00364"></a>00364   <span class="comment">/* Check the parameters */</span>
<a name="l00365"></a>00365   assert_param(IS_TIM_LIST6_PERIPH(TIMx)); 
<a name="l00366"></a>00366   assert_param(IS_TIM_OC_MODE(TIM_OCInitStruct-&gt;TIM_OCMode));
<a name="l00367"></a>00367   assert_param(IS_TIM_OUTPUT_STATE(TIM_OCInitStruct-&gt;TIM_OutputState));
<a name="l00368"></a>00368   assert_param(IS_TIM_OC_POLARITY(TIM_OCInitStruct-&gt;TIM_OCPolarity));   
<a name="l00369"></a>00369    <span class="comment">/* Disable the Channel 2: Reset the CC2E Bit */</span>
<a name="l00370"></a>00370   TIMx-&gt;CCER &amp;= (uint16_t)(~((uint16_t)TIM_CCER_CC2E));
<a name="l00371"></a>00371   
<a name="l00372"></a>00372   <span class="comment">/* Get the TIMx CCER register value */</span>  
<a name="l00373"></a>00373   tmpccer = TIMx-&gt;CCER;
<a name="l00374"></a>00374   <span class="comment">/* Get the TIMx CR2 register value */</span>
<a name="l00375"></a>00375   tmpcr2 =  TIMx-&gt;CR2;
<a name="l00376"></a>00376   
<a name="l00377"></a>00377   <span class="comment">/* Get the TIMx CCMR1 register value */</span>
<a name="l00378"></a>00378   tmpccmrx = TIMx-&gt;CCMR1;
<a name="l00379"></a>00379     
<a name="l00380"></a>00380   <span class="comment">/* Reset the Output Compare mode and Capture/Compare selection Bits */</span>
<a name="l00381"></a>00381   tmpccmrx &amp;= (uint16_t)(~((uint16_t)TIM_CCMR1_OC2M));
<a name="l00382"></a>00382   tmpccmrx &amp;= (uint16_t)(~((uint16_t)TIM_CCMR1_CC2S));
<a name="l00383"></a>00383   
<a name="l00384"></a>00384   <span class="comment">/* Select the Output Compare Mode */</span>
<a name="l00385"></a>00385   tmpccmrx |= (uint16_t)(TIM_OCInitStruct-&gt;TIM_OCMode &lt;&lt; 8);
<a name="l00386"></a>00386   
<a name="l00387"></a>00387   <span class="comment">/* Reset the Output Polarity level */</span>
<a name="l00388"></a>00388   tmpccer &amp;= (uint16_t)(~((uint16_t)TIM_CCER_CC2P));
<a name="l00389"></a>00389   <span class="comment">/* Set the Output Compare Polarity */</span>
<a name="l00390"></a>00390   tmpccer |= (uint16_t)(TIM_OCInitStruct-&gt;TIM_OCPolarity &lt;&lt; 4);
<a name="l00391"></a>00391   
<a name="l00392"></a>00392   <span class="comment">/* Set the Output State */</span>
<a name="l00393"></a>00393   tmpccer |= (uint16_t)(TIM_OCInitStruct-&gt;TIM_OutputState &lt;&lt; 4);
<a name="l00394"></a>00394     
<a name="l00395"></a>00395   <span class="keywordflow">if</span>((TIMx == TIM1) || (TIMx == TIM8))
<a name="l00396"></a>00396   {
<a name="l00397"></a>00397     assert_param(IS_TIM_OUTPUTN_STATE(TIM_OCInitStruct-&gt;TIM_OutputNState));
<a name="l00398"></a>00398     assert_param(IS_TIM_OCN_POLARITY(TIM_OCInitStruct-&gt;TIM_OCNPolarity));
<a name="l00399"></a>00399     assert_param(IS_TIM_OCNIDLE_STATE(TIM_OCInitStruct-&gt;TIM_OCNIdleState));
<a name="l00400"></a>00400     assert_param(IS_TIM_OCIDLE_STATE(TIM_OCInitStruct-&gt;TIM_OCIdleState));
<a name="l00401"></a>00401     
<a name="l00402"></a>00402     <span class="comment">/* Reset the Output N Polarity level */</span>
<a name="l00403"></a>00403     tmpccer &amp;= (uint16_t)(~((uint16_t)TIM_CCER_CC2NP));
<a name="l00404"></a>00404     <span class="comment">/* Set the Output N Polarity */</span>
<a name="l00405"></a>00405     tmpccer |= (uint16_t)(TIM_OCInitStruct-&gt;TIM_OCNPolarity &lt;&lt; 4);
<a name="l00406"></a>00406     
<a name="l00407"></a>00407     <span class="comment">/* Reset the Output N State */</span>
<a name="l00408"></a>00408     tmpccer &amp;= (uint16_t)(~((uint16_t)TIM_CCER_CC2NE));    
<a name="l00409"></a>00409     <span class="comment">/* Set the Output N State */</span>
<a name="l00410"></a>00410     tmpccer |= (uint16_t)(TIM_OCInitStruct-&gt;TIM_OutputNState &lt;&lt; 4);
<a name="l00411"></a>00411     
<a name="l00412"></a>00412     <span class="comment">/* Reset the Ouput Compare and Output Compare N IDLE State */</span>
<a name="l00413"></a>00413     tmpcr2 &amp;= (uint16_t)(~((uint16_t)TIM_CR2_OIS2));
<a name="l00414"></a>00414     tmpcr2 &amp;= (uint16_t)(~((uint16_t)TIM_CR2_OIS2N));
<a name="l00415"></a>00415     
<a name="l00416"></a>00416     <span class="comment">/* Set the Output Idle state */</span>
<a name="l00417"></a>00417     tmpcr2 |= (uint16_t)(TIM_OCInitStruct-&gt;TIM_OCIdleState &lt;&lt; 2);
<a name="l00418"></a>00418     <span class="comment">/* Set the Output N Idle state */</span>
<a name="l00419"></a>00419     tmpcr2 |= (uint16_t)(TIM_OCInitStruct-&gt;TIM_OCNIdleState &lt;&lt; 2);
<a name="l00420"></a>00420   }
<a name="l00421"></a>00421   <span class="comment">/* Write to TIMx CR2 */</span>
<a name="l00422"></a>00422   TIMx-&gt;CR2 = tmpcr2;
<a name="l00423"></a>00423   
<a name="l00424"></a>00424   <span class="comment">/* Write to TIMx CCMR1 */</span>
<a name="l00425"></a>00425   TIMx-&gt;CCMR1 = tmpccmrx;
<a name="l00426"></a>00426 
<a name="l00427"></a>00427   <span class="comment">/* Set the Capture Compare Register value */</span>
<a name="l00428"></a>00428   TIMx-&gt;CCR2 = TIM_OCInitStruct-&gt;TIM_Pulse;
<a name="l00429"></a>00429   
<a name="l00430"></a>00430   <span class="comment">/* Write to TIMx CCER */</span>
<a name="l00431"></a>00431   TIMx-&gt;CCER = tmpccer;
<a name="l00432"></a>00432 }
<a name="l00433"></a>00433 
<a name="l00442"></a><a class="code" href="group___t_i_m___private___functions.html#ga90d4a358d4e6d4c5ed17dc1d6beb5f30">00442</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga90d4a358d4e6d4c5ed17dc1d6beb5f30" title="Initializes the TIMx Channel3 according to the specified parameters in the TIM_OCInitStruct...">TIM_OC3Init</a>(TIM_TypeDef* TIMx, TIM_OCInitTypeDef* TIM_OCInitStruct)
<a name="l00443"></a>00443 {
<a name="l00444"></a>00444   uint16_t tmpccmrx = 0, tmpccer = 0, tmpcr2 = 0;
<a name="l00445"></a>00445    
<a name="l00446"></a>00446   <span class="comment">/* Check the parameters */</span>
<a name="l00447"></a>00447   assert_param(IS_TIM_LIST3_PERIPH(TIMx)); 
<a name="l00448"></a>00448   assert_param(IS_TIM_OC_MODE(TIM_OCInitStruct-&gt;TIM_OCMode));
<a name="l00449"></a>00449   assert_param(IS_TIM_OUTPUT_STATE(TIM_OCInitStruct-&gt;TIM_OutputState));
<a name="l00450"></a>00450   assert_param(IS_TIM_OC_POLARITY(TIM_OCInitStruct-&gt;TIM_OCPolarity));   
<a name="l00451"></a>00451   <span class="comment">/* Disable the Channel 2: Reset the CC2E Bit */</span>
<a name="l00452"></a>00452   TIMx-&gt;CCER &amp;= (uint16_t)(~((uint16_t)TIM_CCER_CC3E));
<a name="l00453"></a>00453   
<a name="l00454"></a>00454   <span class="comment">/* Get the TIMx CCER register value */</span>
<a name="l00455"></a>00455   tmpccer = TIMx-&gt;CCER;
<a name="l00456"></a>00456   <span class="comment">/* Get the TIMx CR2 register value */</span>
<a name="l00457"></a>00457   tmpcr2 =  TIMx-&gt;CR2;
<a name="l00458"></a>00458   
<a name="l00459"></a>00459   <span class="comment">/* Get the TIMx CCMR2 register value */</span>
<a name="l00460"></a>00460   tmpccmrx = TIMx-&gt;CCMR2;
<a name="l00461"></a>00461     
<a name="l00462"></a>00462   <span class="comment">/* Reset the Output Compare mode and Capture/Compare selection Bits */</span>
<a name="l00463"></a>00463   tmpccmrx &amp;= (uint16_t)(~((uint16_t)TIM_CCMR2_OC3M));
<a name="l00464"></a>00464   tmpccmrx &amp;= (uint16_t)(~((uint16_t)TIM_CCMR2_CC3S));  
<a name="l00465"></a>00465   <span class="comment">/* Select the Output Compare Mode */</span>
<a name="l00466"></a>00466   tmpccmrx |= TIM_OCInitStruct-&gt;TIM_OCMode;
<a name="l00467"></a>00467   
<a name="l00468"></a>00468   <span class="comment">/* Reset the Output Polarity level */</span>
<a name="l00469"></a>00469   tmpccer &amp;= (uint16_t)(~((uint16_t)TIM_CCER_CC3P));
<a name="l00470"></a>00470   <span class="comment">/* Set the Output Compare Polarity */</span>
<a name="l00471"></a>00471   tmpccer |= (uint16_t)(TIM_OCInitStruct-&gt;TIM_OCPolarity &lt;&lt; 8);
<a name="l00472"></a>00472   
<a name="l00473"></a>00473   <span class="comment">/* Set the Output State */</span>
<a name="l00474"></a>00474   tmpccer |= (uint16_t)(TIM_OCInitStruct-&gt;TIM_OutputState &lt;&lt; 8);
<a name="l00475"></a>00475     
<a name="l00476"></a>00476   <span class="keywordflow">if</span>((TIMx == TIM1) || (TIMx == TIM8))
<a name="l00477"></a>00477   {
<a name="l00478"></a>00478     assert_param(IS_TIM_OUTPUTN_STATE(TIM_OCInitStruct-&gt;TIM_OutputNState));
<a name="l00479"></a>00479     assert_param(IS_TIM_OCN_POLARITY(TIM_OCInitStruct-&gt;TIM_OCNPolarity));
<a name="l00480"></a>00480     assert_param(IS_TIM_OCNIDLE_STATE(TIM_OCInitStruct-&gt;TIM_OCNIdleState));
<a name="l00481"></a>00481     assert_param(IS_TIM_OCIDLE_STATE(TIM_OCInitStruct-&gt;TIM_OCIdleState));
<a name="l00482"></a>00482     
<a name="l00483"></a>00483     <span class="comment">/* Reset the Output N Polarity level */</span>
<a name="l00484"></a>00484     tmpccer &amp;= (uint16_t)(~((uint16_t)TIM_CCER_CC3NP));
<a name="l00485"></a>00485     <span class="comment">/* Set the Output N Polarity */</span>
<a name="l00486"></a>00486     tmpccer |= (uint16_t)(TIM_OCInitStruct-&gt;TIM_OCNPolarity &lt;&lt; 8);
<a name="l00487"></a>00487     <span class="comment">/* Reset the Output N State */</span>
<a name="l00488"></a>00488     tmpccer &amp;= (uint16_t)(~((uint16_t)TIM_CCER_CC3NE));
<a name="l00489"></a>00489     
<a name="l00490"></a>00490     <span class="comment">/* Set the Output N State */</span>
<a name="l00491"></a>00491     tmpccer |= (uint16_t)(TIM_OCInitStruct-&gt;TIM_OutputNState &lt;&lt; 8);
<a name="l00492"></a>00492     <span class="comment">/* Reset the Ouput Compare and Output Compare N IDLE State */</span>
<a name="l00493"></a>00493     tmpcr2 &amp;= (uint16_t)(~((uint16_t)TIM_CR2_OIS3));
<a name="l00494"></a>00494     tmpcr2 &amp;= (uint16_t)(~((uint16_t)TIM_CR2_OIS3N));
<a name="l00495"></a>00495     <span class="comment">/* Set the Output Idle state */</span>
<a name="l00496"></a>00496     tmpcr2 |= (uint16_t)(TIM_OCInitStruct-&gt;TIM_OCIdleState &lt;&lt; 4);
<a name="l00497"></a>00497     <span class="comment">/* Set the Output N Idle state */</span>
<a name="l00498"></a>00498     tmpcr2 |= (uint16_t)(TIM_OCInitStruct-&gt;TIM_OCNIdleState &lt;&lt; 4);
<a name="l00499"></a>00499   }
<a name="l00500"></a>00500   <span class="comment">/* Write to TIMx CR2 */</span>
<a name="l00501"></a>00501   TIMx-&gt;CR2 = tmpcr2;
<a name="l00502"></a>00502   
<a name="l00503"></a>00503   <span class="comment">/* Write to TIMx CCMR2 */</span>
<a name="l00504"></a>00504   TIMx-&gt;CCMR2 = tmpccmrx;
<a name="l00505"></a>00505 
<a name="l00506"></a>00506   <span class="comment">/* Set the Capture Compare Register value */</span>
<a name="l00507"></a>00507   TIMx-&gt;CCR3 = TIM_OCInitStruct-&gt;TIM_Pulse;
<a name="l00508"></a>00508   
<a name="l00509"></a>00509   <span class="comment">/* Write to TIMx CCER */</span>
<a name="l00510"></a>00510   TIMx-&gt;CCER = tmpccer;
<a name="l00511"></a>00511 }
<a name="l00512"></a>00512 
<a name="l00521"></a><a class="code" href="group___t_i_m___private___functions.html#ga64571ebbb58cac39a9e760050175f11c">00521</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga64571ebbb58cac39a9e760050175f11c" title="Initializes the TIMx Channel4 according to the specified parameters in the TIM_OCInitStruct...">TIM_OC4Init</a>(TIM_TypeDef* TIMx, TIM_OCInitTypeDef* TIM_OCInitStruct)
<a name="l00522"></a>00522 {
<a name="l00523"></a>00523   uint16_t tmpccmrx = 0, tmpccer = 0, tmpcr2 = 0;
<a name="l00524"></a>00524    
<a name="l00525"></a>00525   <span class="comment">/* Check the parameters */</span>
<a name="l00526"></a>00526   assert_param(IS_TIM_LIST3_PERIPH(TIMx)); 
<a name="l00527"></a>00527   assert_param(IS_TIM_OC_MODE(TIM_OCInitStruct-&gt;TIM_OCMode));
<a name="l00528"></a>00528   assert_param(IS_TIM_OUTPUT_STATE(TIM_OCInitStruct-&gt;TIM_OutputState));
<a name="l00529"></a>00529   assert_param(IS_TIM_OC_POLARITY(TIM_OCInitStruct-&gt;TIM_OCPolarity));   
<a name="l00530"></a>00530   <span class="comment">/* Disable the Channel 2: Reset the CC4E Bit */</span>
<a name="l00531"></a>00531   TIMx-&gt;CCER &amp;= (uint16_t)(~((uint16_t)TIM_CCER_CC4E));
<a name="l00532"></a>00532   
<a name="l00533"></a>00533   <span class="comment">/* Get the TIMx CCER register value */</span>
<a name="l00534"></a>00534   tmpccer = TIMx-&gt;CCER;
<a name="l00535"></a>00535   <span class="comment">/* Get the TIMx CR2 register value */</span>
<a name="l00536"></a>00536   tmpcr2 =  TIMx-&gt;CR2;
<a name="l00537"></a>00537   
<a name="l00538"></a>00538   <span class="comment">/* Get the TIMx CCMR2 register value */</span>
<a name="l00539"></a>00539   tmpccmrx = TIMx-&gt;CCMR2;
<a name="l00540"></a>00540     
<a name="l00541"></a>00541   <span class="comment">/* Reset the Output Compare mode and Capture/Compare selection Bits */</span>
<a name="l00542"></a>00542   tmpccmrx &amp;= (uint16_t)(~((uint16_t)TIM_CCMR2_OC4M));
<a name="l00543"></a>00543   tmpccmrx &amp;= (uint16_t)(~((uint16_t)TIM_CCMR2_CC4S));
<a name="l00544"></a>00544   
<a name="l00545"></a>00545   <span class="comment">/* Select the Output Compare Mode */</span>
<a name="l00546"></a>00546   tmpccmrx |= (uint16_t)(TIM_OCInitStruct-&gt;TIM_OCMode &lt;&lt; 8);
<a name="l00547"></a>00547   
<a name="l00548"></a>00548   <span class="comment">/* Reset the Output Polarity level */</span>
<a name="l00549"></a>00549   tmpccer &amp;= (uint16_t)(~((uint16_t)TIM_CCER_CC4P));
<a name="l00550"></a>00550   <span class="comment">/* Set the Output Compare Polarity */</span>
<a name="l00551"></a>00551   tmpccer |= (uint16_t)(TIM_OCInitStruct-&gt;TIM_OCPolarity &lt;&lt; 12);
<a name="l00552"></a>00552   
<a name="l00553"></a>00553   <span class="comment">/* Set the Output State */</span>
<a name="l00554"></a>00554   tmpccer |= (uint16_t)(TIM_OCInitStruct-&gt;TIM_OutputState &lt;&lt; 12);
<a name="l00555"></a>00555     
<a name="l00556"></a>00556   <span class="keywordflow">if</span>((TIMx == TIM1) || (TIMx == TIM8))
<a name="l00557"></a>00557   {
<a name="l00558"></a>00558     assert_param(IS_TIM_OCIDLE_STATE(TIM_OCInitStruct-&gt;TIM_OCIdleState));
<a name="l00559"></a>00559     <span class="comment">/* Reset the Ouput Compare IDLE State */</span>
<a name="l00560"></a>00560     tmpcr2 &amp;= (uint16_t)(~((uint16_t)TIM_CR2_OIS4));
<a name="l00561"></a>00561     <span class="comment">/* Set the Output Idle state */</span>
<a name="l00562"></a>00562     tmpcr2 |= (uint16_t)(TIM_OCInitStruct-&gt;TIM_OCIdleState &lt;&lt; 6);
<a name="l00563"></a>00563   }
<a name="l00564"></a>00564   <span class="comment">/* Write to TIMx CR2 */</span>
<a name="l00565"></a>00565   TIMx-&gt;CR2 = tmpcr2;
<a name="l00566"></a>00566   
<a name="l00567"></a>00567   <span class="comment">/* Write to TIMx CCMR2 */</span>  
<a name="l00568"></a>00568   TIMx-&gt;CCMR2 = tmpccmrx;
<a name="l00569"></a>00569 
<a name="l00570"></a>00570   <span class="comment">/* Set the Capture Compare Register value */</span>
<a name="l00571"></a>00571   TIMx-&gt;CCR4 = TIM_OCInitStruct-&gt;TIM_Pulse;
<a name="l00572"></a>00572   
<a name="l00573"></a>00573   <span class="comment">/* Write to TIMx CCER */</span>
<a name="l00574"></a>00574   TIMx-&gt;CCER = tmpccer;
<a name="l00575"></a>00575 }
<a name="l00576"></a>00576 
<a name="l00585"></a><a class="code" href="group___t_i_m___private___functions.html#ga9e6a153dd6552e4e1188eba227316f7f">00585</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga9e6a153dd6552e4e1188eba227316f7f" title="Initializes the TIM peripheral according to the specified parameters in the TIM_ICInitStruct...">TIM_ICInit</a>(TIM_TypeDef* TIMx, TIM_ICInitTypeDef* TIM_ICInitStruct)
<a name="l00586"></a>00586 {
<a name="l00587"></a>00587   <span class="comment">/* Check the parameters */</span>
<a name="l00588"></a>00588   assert_param(IS_TIM_CHANNEL(TIM_ICInitStruct-&gt;TIM_Channel));
<a name="l00589"></a>00589   assert_param(IS_TIM_IC_POLARITY(TIM_ICInitStruct-&gt;TIM_ICPolarity));
<a name="l00590"></a>00590   assert_param(IS_TIM_IC_SELECTION(TIM_ICInitStruct-&gt;TIM_ICSelection));
<a name="l00591"></a>00591   assert_param(IS_TIM_IC_PRESCALER(TIM_ICInitStruct-&gt;TIM_ICPrescaler));
<a name="l00592"></a>00592   assert_param(IS_TIM_IC_FILTER(TIM_ICInitStruct-&gt;TIM_ICFilter));
<a name="l00593"></a>00593   
<a name="l00594"></a>00594   <span class="keywordflow">if</span> (TIM_ICInitStruct-&gt;TIM_Channel == TIM_Channel_1)
<a name="l00595"></a>00595   {
<a name="l00596"></a>00596     assert_param(IS_TIM_LIST8_PERIPH(TIMx));
<a name="l00597"></a>00597     <span class="comment">/* TI1 Configuration */</span>
<a name="l00598"></a>00598     TI1_Config(TIMx, TIM_ICInitStruct-&gt;TIM_ICPolarity,
<a name="l00599"></a>00599                TIM_ICInitStruct-&gt;TIM_ICSelection,
<a name="l00600"></a>00600                TIM_ICInitStruct-&gt;TIM_ICFilter);
<a name="l00601"></a>00601     <span class="comment">/* Set the Input Capture Prescaler value */</span>
<a name="l00602"></a>00602     <a class="code" href="group___t_i_m___private___functions.html#gaf0f684dea88e222de9689d8ed0ca8805" title="Sets the TIMx Input Capture 1 prescaler.">TIM_SetIC1Prescaler</a>(TIMx, TIM_ICInitStruct-&gt;TIM_ICPrescaler);
<a name="l00603"></a>00603   }
<a name="l00604"></a>00604   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TIM_ICInitStruct-&gt;TIM_Channel == TIM_Channel_2)
<a name="l00605"></a>00605   {
<a name="l00606"></a>00606     assert_param(IS_TIM_LIST6_PERIPH(TIMx));
<a name="l00607"></a>00607     <span class="comment">/* TI2 Configuration */</span>
<a name="l00608"></a>00608     TI2_Config(TIMx, TIM_ICInitStruct-&gt;TIM_ICPolarity,
<a name="l00609"></a>00609                TIM_ICInitStruct-&gt;TIM_ICSelection,
<a name="l00610"></a>00610                TIM_ICInitStruct-&gt;TIM_ICFilter);
<a name="l00611"></a>00611     <span class="comment">/* Set the Input Capture Prescaler value */</span>
<a name="l00612"></a>00612     <a class="code" href="group___t_i_m___private___functions.html#ga3cc4869b5fe73271808512c89322a325" title="Sets the TIMx Input Capture 2 prescaler.">TIM_SetIC2Prescaler</a>(TIMx, TIM_ICInitStruct-&gt;TIM_ICPrescaler);
<a name="l00613"></a>00613   }
<a name="l00614"></a>00614   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TIM_ICInitStruct-&gt;TIM_Channel == TIM_Channel_3)
<a name="l00615"></a>00615   {
<a name="l00616"></a>00616     assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l00617"></a>00617     <span class="comment">/* TI3 Configuration */</span>
<a name="l00618"></a>00618     TI3_Config(TIMx,  TIM_ICInitStruct-&gt;TIM_ICPolarity,
<a name="l00619"></a>00619                TIM_ICInitStruct-&gt;TIM_ICSelection,
<a name="l00620"></a>00620                TIM_ICInitStruct-&gt;TIM_ICFilter);
<a name="l00621"></a>00621     <span class="comment">/* Set the Input Capture Prescaler value */</span>
<a name="l00622"></a>00622     <a class="code" href="group___t_i_m___private___functions.html#ga76f906383b8132ebe00dffadb70cf7f9" title="Sets the TIMx Input Capture 3 prescaler.">TIM_SetIC3Prescaler</a>(TIMx, TIM_ICInitStruct-&gt;TIM_ICPrescaler);
<a name="l00623"></a>00623   }
<a name="l00624"></a>00624   <span class="keywordflow">else</span>
<a name="l00625"></a>00625   {
<a name="l00626"></a>00626     assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l00627"></a>00627     <span class="comment">/* TI4 Configuration */</span>
<a name="l00628"></a>00628     TI4_Config(TIMx, TIM_ICInitStruct-&gt;TIM_ICPolarity,
<a name="l00629"></a>00629                TIM_ICInitStruct-&gt;TIM_ICSelection,
<a name="l00630"></a>00630                TIM_ICInitStruct-&gt;TIM_ICFilter);
<a name="l00631"></a>00631     <span class="comment">/* Set the Input Capture Prescaler value */</span>
<a name="l00632"></a>00632     <a class="code" href="group___t_i_m___private___functions.html#ga0f2c784271356d6b64b8c0da64dbdbc2" title="Sets the TIMx Input Capture 4 prescaler.">TIM_SetIC4Prescaler</a>(TIMx, TIM_ICInitStruct-&gt;TIM_ICPrescaler);
<a name="l00633"></a>00633   }
<a name="l00634"></a>00634 }
<a name="l00635"></a>00635 
<a name="l00644"></a><a class="code" href="group___t_i_m___private___functions.html#gaa71f9296556310f85628d6c748a06475">00644</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#gaa71f9296556310f85628d6c748a06475" title="Configures the TIM peripheral according to the specified parameters in the TIM_ICInitStruct...">TIM_PWMIConfig</a>(TIM_TypeDef* TIMx, TIM_ICInitTypeDef* TIM_ICInitStruct)
<a name="l00645"></a>00645 {
<a name="l00646"></a>00646   uint16_t icoppositepolarity = TIM_ICPolarity_Rising;
<a name="l00647"></a>00647   uint16_t icoppositeselection = TIM_ICSelection_DirectTI;
<a name="l00648"></a>00648   <span class="comment">/* Check the parameters */</span>
<a name="l00649"></a>00649   assert_param(IS_TIM_LIST6_PERIPH(TIMx));
<a name="l00650"></a>00650   <span class="comment">/* Select the Opposite Input Polarity */</span>
<a name="l00651"></a>00651   <span class="keywordflow">if</span> (TIM_ICInitStruct-&gt;TIM_ICPolarity == TIM_ICPolarity_Rising)
<a name="l00652"></a>00652   {
<a name="l00653"></a>00653     icoppositepolarity = TIM_ICPolarity_Falling;
<a name="l00654"></a>00654   }
<a name="l00655"></a>00655   <span class="keywordflow">else</span>
<a name="l00656"></a>00656   {
<a name="l00657"></a>00657     icoppositepolarity = TIM_ICPolarity_Rising;
<a name="l00658"></a>00658   }
<a name="l00659"></a>00659   <span class="comment">/* Select the Opposite Input */</span>
<a name="l00660"></a>00660   <span class="keywordflow">if</span> (TIM_ICInitStruct-&gt;TIM_ICSelection == TIM_ICSelection_DirectTI)
<a name="l00661"></a>00661   {
<a name="l00662"></a>00662     icoppositeselection = TIM_ICSelection_IndirectTI;
<a name="l00663"></a>00663   }
<a name="l00664"></a>00664   <span class="keywordflow">else</span>
<a name="l00665"></a>00665   {
<a name="l00666"></a>00666     icoppositeselection = TIM_ICSelection_DirectTI;
<a name="l00667"></a>00667   }
<a name="l00668"></a>00668   <span class="keywordflow">if</span> (TIM_ICInitStruct-&gt;TIM_Channel == TIM_Channel_1)
<a name="l00669"></a>00669   {
<a name="l00670"></a>00670     <span class="comment">/* TI1 Configuration */</span>
<a name="l00671"></a>00671     TI1_Config(TIMx, TIM_ICInitStruct-&gt;TIM_ICPolarity, TIM_ICInitStruct-&gt;TIM_ICSelection,
<a name="l00672"></a>00672                TIM_ICInitStruct-&gt;TIM_ICFilter);
<a name="l00673"></a>00673     <span class="comment">/* Set the Input Capture Prescaler value */</span>
<a name="l00674"></a>00674     <a class="code" href="group___t_i_m___private___functions.html#gaf0f684dea88e222de9689d8ed0ca8805" title="Sets the TIMx Input Capture 1 prescaler.">TIM_SetIC1Prescaler</a>(TIMx, TIM_ICInitStruct-&gt;TIM_ICPrescaler);
<a name="l00675"></a>00675     <span class="comment">/* TI2 Configuration */</span>
<a name="l00676"></a>00676     TI2_Config(TIMx, icoppositepolarity, icoppositeselection, TIM_ICInitStruct-&gt;TIM_ICFilter);
<a name="l00677"></a>00677     <span class="comment">/* Set the Input Capture Prescaler value */</span>
<a name="l00678"></a>00678     <a class="code" href="group___t_i_m___private___functions.html#ga3cc4869b5fe73271808512c89322a325" title="Sets the TIMx Input Capture 2 prescaler.">TIM_SetIC2Prescaler</a>(TIMx, TIM_ICInitStruct-&gt;TIM_ICPrescaler);
<a name="l00679"></a>00679   }
<a name="l00680"></a>00680   <span class="keywordflow">else</span>
<a name="l00681"></a>00681   { 
<a name="l00682"></a>00682     <span class="comment">/* TI2 Configuration */</span>
<a name="l00683"></a>00683     TI2_Config(TIMx, TIM_ICInitStruct-&gt;TIM_ICPolarity, TIM_ICInitStruct-&gt;TIM_ICSelection,
<a name="l00684"></a>00684                TIM_ICInitStruct-&gt;TIM_ICFilter);
<a name="l00685"></a>00685     <span class="comment">/* Set the Input Capture Prescaler value */</span>
<a name="l00686"></a>00686     <a class="code" href="group___t_i_m___private___functions.html#ga3cc4869b5fe73271808512c89322a325" title="Sets the TIMx Input Capture 2 prescaler.">TIM_SetIC2Prescaler</a>(TIMx, TIM_ICInitStruct-&gt;TIM_ICPrescaler);
<a name="l00687"></a>00687     <span class="comment">/* TI1 Configuration */</span>
<a name="l00688"></a>00688     TI1_Config(TIMx, icoppositepolarity, icoppositeselection, TIM_ICInitStruct-&gt;TIM_ICFilter);
<a name="l00689"></a>00689     <span class="comment">/* Set the Input Capture Prescaler value */</span>
<a name="l00690"></a>00690     <a class="code" href="group___t_i_m___private___functions.html#gaf0f684dea88e222de9689d8ed0ca8805" title="Sets the TIMx Input Capture 1 prescaler.">TIM_SetIC1Prescaler</a>(TIMx, TIM_ICInitStruct-&gt;TIM_ICPrescaler);
<a name="l00691"></a>00691   }
<a name="l00692"></a>00692 }
<a name="l00693"></a>00693 
<a name="l00702"></a><a class="code" href="group___t_i_m___private___functions.html#ga3df4ba3f0727f63ce621e2b2e6035d4f">00702</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga3df4ba3f0727f63ce621e2b2e6035d4f" title="Configures the: Break feature, dead time, Lock level, the OSSI, the OSSR State and...">TIM_BDTRConfig</a>(TIM_TypeDef* TIMx, TIM_BDTRInitTypeDef *TIM_BDTRInitStruct)
<a name="l00703"></a>00703 {
<a name="l00704"></a>00704   <span class="comment">/* Check the parameters */</span>
<a name="l00705"></a>00705   assert_param(IS_TIM_LIST2_PERIPH(TIMx));
<a name="l00706"></a>00706   assert_param(IS_TIM_OSSR_STATE(TIM_BDTRInitStruct-&gt;TIM_OSSRState));
<a name="l00707"></a>00707   assert_param(IS_TIM_OSSI_STATE(TIM_BDTRInitStruct-&gt;TIM_OSSIState));
<a name="l00708"></a>00708   assert_param(IS_TIM_LOCK_LEVEL(TIM_BDTRInitStruct-&gt;TIM_LOCKLevel));
<a name="l00709"></a>00709   assert_param(IS_TIM_BREAK_STATE(TIM_BDTRInitStruct-&gt;TIM_Break));
<a name="l00710"></a>00710   assert_param(IS_TIM_BREAK_POLARITY(TIM_BDTRInitStruct-&gt;TIM_BreakPolarity));
<a name="l00711"></a>00711   assert_param(IS_TIM_AUTOMATIC_OUTPUT_STATE(TIM_BDTRInitStruct-&gt;TIM_AutomaticOutput));
<a name="l00712"></a>00712   <span class="comment">/* Set the Lock level, the Break enable Bit and the Ploarity, the OSSR State,</span>
<a name="l00713"></a>00713 <span class="comment">     the OSSI State, the dead time value and the Automatic Output Enable Bit */</span>
<a name="l00714"></a>00714   TIMx-&gt;BDTR = (uint32_t)TIM_BDTRInitStruct-&gt;TIM_OSSRState | TIM_BDTRInitStruct-&gt;TIM_OSSIState |
<a name="l00715"></a>00715              TIM_BDTRInitStruct-&gt;TIM_LOCKLevel | TIM_BDTRInitStruct-&gt;TIM_DeadTime |
<a name="l00716"></a>00716              TIM_BDTRInitStruct-&gt;TIM_Break | TIM_BDTRInitStruct-&gt;TIM_BreakPolarity |
<a name="l00717"></a>00717              TIM_BDTRInitStruct-&gt;TIM_AutomaticOutput;
<a name="l00718"></a>00718 }
<a name="l00719"></a>00719 
<a name="l00726"></a><a class="code" href="group___t_i_m___private___functions.html#ga1556a0b9a5d53506875fd7de0cbc6b1f">00726</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga1556a0b9a5d53506875fd7de0cbc6b1f" title="Fills each TIM_TimeBaseInitStruct member with its default value.">TIM_TimeBaseStructInit</a>(TIM_TimeBaseInitTypeDef* TIM_TimeBaseInitStruct)
<a name="l00727"></a>00727 {
<a name="l00728"></a>00728   <span class="comment">/* Set the default configuration */</span>
<a name="l00729"></a>00729   TIM_TimeBaseInitStruct-&gt;TIM_Period = 0xFFFF;
<a name="l00730"></a>00730   TIM_TimeBaseInitStruct-&gt;TIM_Prescaler = 0x0000;
<a name="l00731"></a>00731   TIM_TimeBaseInitStruct-&gt;TIM_ClockDivision = TIM_CKD_DIV1;
<a name="l00732"></a>00732   TIM_TimeBaseInitStruct-&gt;TIM_CounterMode = TIM_CounterMode_Up;
<a name="l00733"></a>00733   TIM_TimeBaseInitStruct-&gt;TIM_RepetitionCounter = 0x0000;
<a name="l00734"></a>00734 }
<a name="l00735"></a>00735 
<a name="l00742"></a><a class="code" href="group___t_i_m___private___functions.html#ga394683c78ae02837882e36014e11643e">00742</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga394683c78ae02837882e36014e11643e" title="Fills each TIM_OCInitStruct member with its default value.">TIM_OCStructInit</a>(TIM_OCInitTypeDef* TIM_OCInitStruct)
<a name="l00743"></a>00743 {
<a name="l00744"></a>00744   <span class="comment">/* Set the default configuration */</span>
<a name="l00745"></a>00745   TIM_OCInitStruct-&gt;TIM_OCMode = TIM_OCMode_Timing;
<a name="l00746"></a>00746   TIM_OCInitStruct-&gt;TIM_OutputState = TIM_OutputState_Disable;
<a name="l00747"></a>00747   TIM_OCInitStruct-&gt;TIM_OutputNState = TIM_OutputNState_Disable;
<a name="l00748"></a>00748   TIM_OCInitStruct-&gt;TIM_Pulse = 0x0000;
<a name="l00749"></a>00749   TIM_OCInitStruct-&gt;TIM_OCPolarity = TIM_OCPolarity_High;
<a name="l00750"></a>00750   TIM_OCInitStruct-&gt;TIM_OCNPolarity = TIM_OCPolarity_High;
<a name="l00751"></a>00751   TIM_OCInitStruct-&gt;TIM_OCIdleState = TIM_OCIdleState_Reset;
<a name="l00752"></a>00752   TIM_OCInitStruct-&gt;TIM_OCNIdleState = TIM_OCNIdleState_Reset;
<a name="l00753"></a>00753 }
<a name="l00754"></a>00754 
<a name="l00761"></a><a class="code" href="group___t_i_m___private___functions.html#ga5005dac8e4e8a4c7fc2a0ef05b77cc50">00761</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga5005dac8e4e8a4c7fc2a0ef05b77cc50" title="Fills each TIM_ICInitStruct member with its default value.">TIM_ICStructInit</a>(TIM_ICInitTypeDef* TIM_ICInitStruct)
<a name="l00762"></a>00762 {
<a name="l00763"></a>00763   <span class="comment">/* Set the default configuration */</span>
<a name="l00764"></a>00764   TIM_ICInitStruct-&gt;TIM_Channel = TIM_Channel_1;
<a name="l00765"></a>00765   TIM_ICInitStruct-&gt;TIM_ICPolarity = TIM_ICPolarity_Rising;
<a name="l00766"></a>00766   TIM_ICInitStruct-&gt;TIM_ICSelection = TIM_ICSelection_DirectTI;
<a name="l00767"></a>00767   TIM_ICInitStruct-&gt;TIM_ICPrescaler = TIM_ICPSC_DIV1;
<a name="l00768"></a>00768   TIM_ICInitStruct-&gt;TIM_ICFilter = 0x00;
<a name="l00769"></a>00769 }
<a name="l00770"></a>00770 
<a name="l00777"></a><a class="code" href="group___t_i_m___private___functions.html#gaea0f49938cda8ae0738162194798afc6">00777</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#gaea0f49938cda8ae0738162194798afc6" title="Fills each TIM_BDTRInitStruct member with its default value.">TIM_BDTRStructInit</a>(TIM_BDTRInitTypeDef* TIM_BDTRInitStruct)
<a name="l00778"></a>00778 {
<a name="l00779"></a>00779   <span class="comment">/* Set the default configuration */</span>
<a name="l00780"></a>00780   TIM_BDTRInitStruct-&gt;TIM_OSSRState = TIM_OSSRState_Disable;
<a name="l00781"></a>00781   TIM_BDTRInitStruct-&gt;TIM_OSSIState = TIM_OSSIState_Disable;
<a name="l00782"></a>00782   TIM_BDTRInitStruct-&gt;TIM_LOCKLevel = TIM_LOCKLevel_OFF;
<a name="l00783"></a>00783   TIM_BDTRInitStruct-&gt;TIM_DeadTime = 0x00;
<a name="l00784"></a>00784   TIM_BDTRInitStruct-&gt;TIM_Break = TIM_Break_Disable;
<a name="l00785"></a>00785   TIM_BDTRInitStruct-&gt;TIM_BreakPolarity = TIM_BreakPolarity_Low;
<a name="l00786"></a>00786   TIM_BDTRInitStruct-&gt;TIM_AutomaticOutput = TIM_AutomaticOutput_Disable;
<a name="l00787"></a>00787 }
<a name="l00788"></a>00788 
<a name="l00796"></a><a class="code" href="group___t_i_m___private___functions.html#ga2bdc275bcbd2ce9d1ba632e6c89896b7">00796</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga2bdc275bcbd2ce9d1ba632e6c89896b7" title="Enables or disables the specified TIM peripheral.">TIM_Cmd</a>(TIM_TypeDef* TIMx, FunctionalState NewState)
<a name="l00797"></a>00797 {
<a name="l00798"></a>00798   <span class="comment">/* Check the parameters */</span>
<a name="l00799"></a>00799   assert_param(IS_TIM_ALL_PERIPH(TIMx));
<a name="l00800"></a>00800   assert_param(IS_FUNCTIONAL_STATE(NewState));
<a name="l00801"></a>00801   
<a name="l00802"></a>00802   <span class="keywordflow">if</span> (NewState != DISABLE)
<a name="l00803"></a>00803   {
<a name="l00804"></a>00804     <span class="comment">/* Enable the TIM Counter */</span>
<a name="l00805"></a>00805     TIMx-&gt;CR1 |= TIM_CR1_CEN;
<a name="l00806"></a>00806   }
<a name="l00807"></a>00807   <span class="keywordflow">else</span>
<a name="l00808"></a>00808   {
<a name="l00809"></a>00809     <span class="comment">/* Disable the TIM Counter */</span>
<a name="l00810"></a>00810     TIMx-&gt;CR1 &amp;= (uint16_t)(~((uint16_t)TIM_CR1_CEN));
<a name="l00811"></a>00811   }
<a name="l00812"></a>00812 }
<a name="l00813"></a>00813 
<a name="l00821"></a><a class="code" href="group___t_i_m___private___functions.html#ga3e59ebced2ab8e0b817c460f1670e97d">00821</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga3e59ebced2ab8e0b817c460f1670e97d" title="Enables or disables the TIM peripheral Main Outputs.">TIM_CtrlPWMOutputs</a>(TIM_TypeDef* TIMx, FunctionalState NewState)
<a name="l00822"></a>00822 {
<a name="l00823"></a>00823   <span class="comment">/* Check the parameters */</span>
<a name="l00824"></a>00824   assert_param(IS_TIM_LIST2_PERIPH(TIMx));
<a name="l00825"></a>00825   assert_param(IS_FUNCTIONAL_STATE(NewState));
<a name="l00826"></a>00826   <span class="keywordflow">if</span> (NewState != DISABLE)
<a name="l00827"></a>00827   {
<a name="l00828"></a>00828     <span class="comment">/* Enable the TIM Main Output */</span>
<a name="l00829"></a>00829     TIMx-&gt;BDTR |= TIM_BDTR_MOE;
<a name="l00830"></a>00830   }
<a name="l00831"></a>00831   <span class="keywordflow">else</span>
<a name="l00832"></a>00832   {
<a name="l00833"></a>00833     <span class="comment">/* Disable the TIM Main Output */</span>
<a name="l00834"></a>00834     TIMx-&gt;BDTR &amp;= (uint16_t)(~((uint16_t)TIM_BDTR_MOE));
<a name="l00835"></a>00835   }  
<a name="l00836"></a>00836 }
<a name="l00837"></a>00837 
<a name="l00862"></a><a class="code" href="group___t_i_m___private___functions.html#ga70e3d6c09d55ee69002e154c85cd40e4">00862</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga70e3d6c09d55ee69002e154c85cd40e4" title="Enables or disables the specified TIM interrupts.">TIM_ITConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_IT, FunctionalState NewState)
<a name="l00863"></a>00863 {  
<a name="l00864"></a>00864   <span class="comment">/* Check the parameters */</span>
<a name="l00865"></a>00865   assert_param(IS_TIM_ALL_PERIPH(TIMx));
<a name="l00866"></a>00866   assert_param(IS_TIM_IT(TIM_IT));
<a name="l00867"></a>00867   assert_param(IS_FUNCTIONAL_STATE(NewState));
<a name="l00868"></a>00868   
<a name="l00869"></a>00869   <span class="keywordflow">if</span> (NewState != DISABLE)
<a name="l00870"></a>00870   {
<a name="l00871"></a>00871     <span class="comment">/* Enable the Interrupt sources */</span>
<a name="l00872"></a>00872     TIMx-&gt;DIER |= TIM_IT;
<a name="l00873"></a>00873   }
<a name="l00874"></a>00874   <span class="keywordflow">else</span>
<a name="l00875"></a>00875   {
<a name="l00876"></a>00876     <span class="comment">/* Disable the Interrupt sources */</span>
<a name="l00877"></a>00877     TIMx-&gt;DIER &amp;= (uint16_t)~TIM_IT;
<a name="l00878"></a>00878   }
<a name="l00879"></a>00879 }
<a name="l00880"></a>00880 
<a name="l00899"></a><a class="code" href="group___t_i_m___private___functions.html#ga38bd4ffda920dd4f7655a0a2c6100a6e">00899</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga38bd4ffda920dd4f7655a0a2c6100a6e" title="Configures the TIMx event to be generate by software.">TIM_GenerateEvent</a>(TIM_TypeDef* TIMx, uint16_t TIM_EventSource)
<a name="l00900"></a>00900 { 
<a name="l00901"></a>00901   <span class="comment">/* Check the parameters */</span>
<a name="l00902"></a>00902   assert_param(IS_TIM_ALL_PERIPH(TIMx));
<a name="l00903"></a>00903   assert_param(IS_TIM_EVENT_SOURCE(TIM_EventSource));
<a name="l00904"></a>00904   
<a name="l00905"></a>00905   <span class="comment">/* Set the event sources */</span>
<a name="l00906"></a>00906   TIMx-&gt;EGR = TIM_EventSource;
<a name="l00907"></a>00907 }
<a name="l00908"></a>00908 
<a name="l00927"></a><a class="code" href="group___t_i_m___private___functions.html#gad7156f84c436c8ac92cd789611826d09">00927</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#gad7156f84c436c8ac92cd789611826d09" title="Configures the TIMxs DMA interface.">TIM_DMAConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_DMABase, uint16_t TIM_DMABurstLength)
<a name="l00928"></a>00928 {
<a name="l00929"></a>00929   <span class="comment">/* Check the parameters */</span>
<a name="l00930"></a>00930   assert_param(IS_TIM_LIST4_PERIPH(TIMx));
<a name="l00931"></a>00931   assert_param(IS_TIM_DMA_BASE(TIM_DMABase));
<a name="l00932"></a>00932   assert_param(IS_TIM_DMA_LENGTH(TIM_DMABurstLength));
<a name="l00933"></a>00933   <span class="comment">/* Set the DMA Base and the DMA Burst Length */</span>
<a name="l00934"></a>00934   TIMx-&gt;DCR = TIM_DMABase | TIM_DMABurstLength;
<a name="l00935"></a>00935 }
<a name="l00936"></a>00936 
<a name="l00954"></a><a class="code" href="group___t_i_m___private___functions.html#ga24700389cfa3ea9b42234933b23f1399">00954</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga24700389cfa3ea9b42234933b23f1399" title="Enables or disables the TIMxs DMA Requests.">TIM_DMACmd</a>(TIM_TypeDef* TIMx, uint16_t TIM_DMASource, FunctionalState NewState)
<a name="l00955"></a>00955 { 
<a name="l00956"></a>00956   <span class="comment">/* Check the parameters */</span>
<a name="l00957"></a>00957   assert_param(IS_TIM_LIST9_PERIPH(TIMx));
<a name="l00958"></a>00958   assert_param(IS_TIM_DMA_SOURCE(TIM_DMASource));
<a name="l00959"></a>00959   assert_param(IS_FUNCTIONAL_STATE(NewState));
<a name="l00960"></a>00960   
<a name="l00961"></a>00961   <span class="keywordflow">if</span> (NewState != DISABLE)
<a name="l00962"></a>00962   {
<a name="l00963"></a>00963     <span class="comment">/* Enable the DMA sources */</span>
<a name="l00964"></a>00964     TIMx-&gt;DIER |= TIM_DMASource; 
<a name="l00965"></a>00965   }
<a name="l00966"></a>00966   <span class="keywordflow">else</span>
<a name="l00967"></a>00967   {
<a name="l00968"></a>00968     <span class="comment">/* Disable the DMA sources */</span>
<a name="l00969"></a>00969     TIMx-&gt;DIER &amp;= (uint16_t)~TIM_DMASource;
<a name="l00970"></a>00970   }
<a name="l00971"></a>00971 }
<a name="l00972"></a>00972 
<a name="l00979"></a><a class="code" href="group___t_i_m___private___functions.html#ga2394f0221709c0659874f9a4184cf86e">00979</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga2394f0221709c0659874f9a4184cf86e" title="Configures the TIMx interrnal Clock.">TIM_InternalClockConfig</a>(TIM_TypeDef* TIMx)
<a name="l00980"></a>00980 {
<a name="l00981"></a>00981   <span class="comment">/* Check the parameters */</span>
<a name="l00982"></a>00982   assert_param(IS_TIM_LIST6_PERIPH(TIMx));
<a name="l00983"></a>00983   <span class="comment">/* Disable slave mode to clock the prescaler directly with the internal clock */</span>
<a name="l00984"></a>00984   TIMx-&gt;SMCR &amp;=  (uint16_t)(~((uint16_t)TIM_SMCR_SMS));
<a name="l00985"></a>00985 }
<a name="l00986"></a>00986 
<a name="l00998"></a><a class="code" href="group___t_i_m___private___functions.html#gabef227d21d9e121e6a4ec5ab6223f5a9">00998</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#gabef227d21d9e121e6a4ec5ab6223f5a9" title="Configures the TIMx Internal Trigger as External Clock.">TIM_ITRxExternalClockConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_InputTriggerSource)
<a name="l00999"></a>00999 {
<a name="l01000"></a>01000   <span class="comment">/* Check the parameters */</span>
<a name="l01001"></a>01001   assert_param(IS_TIM_LIST6_PERIPH(TIMx));
<a name="l01002"></a>01002   assert_param(IS_TIM_INTERNAL_TRIGGER_SELECTION(TIM_InputTriggerSource));
<a name="l01003"></a>01003   <span class="comment">/* Select the Internal Trigger */</span>
<a name="l01004"></a>01004   <a class="code" href="group___t_i_m___private___functions.html#ga4252583c6ae8a73d6fc66f7e951dbc35" title="Selects the Input Trigger source.">TIM_SelectInputTrigger</a>(TIMx, TIM_InputTriggerSource);
<a name="l01005"></a>01005   <span class="comment">/* Select the External clock mode1 */</span>
<a name="l01006"></a>01006   TIMx-&gt;SMCR |= TIM_SlaveMode_External1;
<a name="l01007"></a>01007 }
<a name="l01008"></a>01008 
<a name="l01025"></a><a class="code" href="group___t_i_m___private___functions.html#gaf460e7d9c9969044e364130e209937fc">01025</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#gaf460e7d9c9969044e364130e209937fc" title="Configures the TIMx Trigger as External Clock.">TIM_TIxExternalClockConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_TIxExternalCLKSource,
<a name="l01026"></a>01026                                 uint16_t TIM_ICPolarity, uint16_t ICFilter)
<a name="l01027"></a>01027 {
<a name="l01028"></a>01028   <span class="comment">/* Check the parameters */</span>
<a name="l01029"></a>01029   assert_param(IS_TIM_LIST6_PERIPH(TIMx));
<a name="l01030"></a>01030   assert_param(IS_TIM_TIXCLK_SOURCE(TIM_TIxExternalCLKSource));
<a name="l01031"></a>01031   assert_param(IS_TIM_IC_POLARITY(TIM_ICPolarity));
<a name="l01032"></a>01032   assert_param(IS_TIM_IC_FILTER(ICFilter));
<a name="l01033"></a>01033   <span class="comment">/* Configure the Timer Input Clock Source */</span>
<a name="l01034"></a>01034   <span class="keywordflow">if</span> (TIM_TIxExternalCLKSource == TIM_TIxExternalCLK1Source_TI2)
<a name="l01035"></a>01035   {
<a name="l01036"></a>01036     TI2_Config(TIMx, TIM_ICPolarity, TIM_ICSelection_DirectTI, ICFilter);
<a name="l01037"></a>01037   }
<a name="l01038"></a>01038   <span class="keywordflow">else</span>
<a name="l01039"></a>01039   {
<a name="l01040"></a>01040     TI1_Config(TIMx, TIM_ICPolarity, TIM_ICSelection_DirectTI, ICFilter);
<a name="l01041"></a>01041   }
<a name="l01042"></a>01042   <span class="comment">/* Select the Trigger source */</span>
<a name="l01043"></a>01043   <a class="code" href="group___t_i_m___private___functions.html#ga4252583c6ae8a73d6fc66f7e951dbc35" title="Selects the Input Trigger source.">TIM_SelectInputTrigger</a>(TIMx, TIM_TIxExternalCLKSource);
<a name="l01044"></a>01044   <span class="comment">/* Select the External clock mode1 */</span>
<a name="l01045"></a>01045   TIMx-&gt;SMCR |= TIM_SlaveMode_External1;
<a name="l01046"></a>01046 }
<a name="l01047"></a>01047 
<a name="l01065"></a><a class="code" href="group___t_i_m___private___functions.html#ga47c05638b93aabcd641dbc8859e1b2df">01065</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga47c05638b93aabcd641dbc8859e1b2df" title="Configures the External clock Mode1.">TIM_ETRClockMode1Config</a>(TIM_TypeDef* TIMx, uint16_t TIM_ExtTRGPrescaler, uint16_t TIM_ExtTRGPolarity,
<a name="l01066"></a>01066                              uint16_t ExtTRGFilter)
<a name="l01067"></a>01067 {
<a name="l01068"></a>01068   uint16_t tmpsmcr = 0;
<a name="l01069"></a>01069   <span class="comment">/* Check the parameters */</span>
<a name="l01070"></a>01070   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l01071"></a>01071   assert_param(IS_TIM_EXT_PRESCALER(TIM_ExtTRGPrescaler));
<a name="l01072"></a>01072   assert_param(IS_TIM_EXT_POLARITY(TIM_ExtTRGPolarity));
<a name="l01073"></a>01073   assert_param(IS_TIM_EXT_FILTER(ExtTRGFilter));
<a name="l01074"></a>01074   <span class="comment">/* Configure the ETR Clock source */</span>
<a name="l01075"></a>01075   <a class="code" href="group___t_i_m___private___functions.html#ga8bdde400b7a30f3e747fe8e4962c0abe" title="Configures the TIMx External Trigger (ETR).">TIM_ETRConfig</a>(TIMx, TIM_ExtTRGPrescaler, TIM_ExtTRGPolarity, ExtTRGFilter);
<a name="l01076"></a>01076   
<a name="l01077"></a>01077   <span class="comment">/* Get the TIMx SMCR register value */</span>
<a name="l01078"></a>01078   tmpsmcr = TIMx-&gt;SMCR;
<a name="l01079"></a>01079   <span class="comment">/* Reset the SMS Bits */</span>
<a name="l01080"></a>01080   tmpsmcr &amp;= (uint16_t)(~((uint16_t)TIM_SMCR_SMS));
<a name="l01081"></a>01081   <span class="comment">/* Select the External clock mode1 */</span>
<a name="l01082"></a>01082   tmpsmcr |= TIM_SlaveMode_External1;
<a name="l01083"></a>01083   <span class="comment">/* Select the Trigger selection : ETRF */</span>
<a name="l01084"></a>01084   tmpsmcr &amp;= (uint16_t)(~((uint16_t)TIM_SMCR_TS));
<a name="l01085"></a>01085   tmpsmcr |= TIM_TS_ETRF;
<a name="l01086"></a>01086   <span class="comment">/* Write to TIMx SMCR */</span>
<a name="l01087"></a>01087   TIMx-&gt;SMCR = tmpsmcr;
<a name="l01088"></a>01088 }
<a name="l01089"></a>01089 
<a name="l01107"></a><a class="code" href="group___t_i_m___private___functions.html#ga0a9cbcbab32326cbbdaf4c111f59ec20">01107</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga0a9cbcbab32326cbbdaf4c111f59ec20" title="Configures the External clock Mode2.">TIM_ETRClockMode2Config</a>(TIM_TypeDef* TIMx, uint16_t TIM_ExtTRGPrescaler, 
<a name="l01108"></a>01108                              uint16_t TIM_ExtTRGPolarity, uint16_t ExtTRGFilter)
<a name="l01109"></a>01109 {
<a name="l01110"></a>01110   <span class="comment">/* Check the parameters */</span>
<a name="l01111"></a>01111   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l01112"></a>01112   assert_param(IS_TIM_EXT_PRESCALER(TIM_ExtTRGPrescaler));
<a name="l01113"></a>01113   assert_param(IS_TIM_EXT_POLARITY(TIM_ExtTRGPolarity));
<a name="l01114"></a>01114   assert_param(IS_TIM_EXT_FILTER(ExtTRGFilter));
<a name="l01115"></a>01115   <span class="comment">/* Configure the ETR Clock source */</span>
<a name="l01116"></a>01116   <a class="code" href="group___t_i_m___private___functions.html#ga8bdde400b7a30f3e747fe8e4962c0abe" title="Configures the TIMx External Trigger (ETR).">TIM_ETRConfig</a>(TIMx, TIM_ExtTRGPrescaler, TIM_ExtTRGPolarity, ExtTRGFilter);
<a name="l01117"></a>01117   <span class="comment">/* Enable the External clock mode2 */</span>
<a name="l01118"></a>01118   TIMx-&gt;SMCR |= TIM_SMCR_ECE;
<a name="l01119"></a>01119 }
<a name="l01120"></a>01120 
<a name="l01138"></a><a class="code" href="group___t_i_m___private___functions.html#ga8bdde400b7a30f3e747fe8e4962c0abe">01138</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga8bdde400b7a30f3e747fe8e4962c0abe" title="Configures the TIMx External Trigger (ETR).">TIM_ETRConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_ExtTRGPrescaler, uint16_t TIM_ExtTRGPolarity,
<a name="l01139"></a>01139                    uint16_t ExtTRGFilter)
<a name="l01140"></a>01140 {
<a name="l01141"></a>01141   uint16_t tmpsmcr = 0;
<a name="l01142"></a>01142   <span class="comment">/* Check the parameters */</span>
<a name="l01143"></a>01143   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l01144"></a>01144   assert_param(IS_TIM_EXT_PRESCALER(TIM_ExtTRGPrescaler));
<a name="l01145"></a>01145   assert_param(IS_TIM_EXT_POLARITY(TIM_ExtTRGPolarity));
<a name="l01146"></a>01146   assert_param(IS_TIM_EXT_FILTER(ExtTRGFilter));
<a name="l01147"></a>01147   tmpsmcr = TIMx-&gt;SMCR;
<a name="l01148"></a>01148   <span class="comment">/* Reset the ETR Bits */</span>
<a name="l01149"></a>01149   tmpsmcr &amp;= SMCR_ETR_Mask;
<a name="l01150"></a>01150   <span class="comment">/* Set the Prescaler, the Filter value and the Polarity */</span>
<a name="l01151"></a>01151   tmpsmcr |= (uint16_t)(TIM_ExtTRGPrescaler | (uint16_t)(TIM_ExtTRGPolarity | (uint16_t)(ExtTRGFilter &lt;&lt; (uint16_t)8)));
<a name="l01152"></a>01152   <span class="comment">/* Write to TIMx SMCR */</span>
<a name="l01153"></a>01153   TIMx-&gt;SMCR = tmpsmcr;
<a name="l01154"></a>01154 }
<a name="l01155"></a>01155 
<a name="l01166"></a><a class="code" href="group___t_i_m___private___functions.html#ga45c6fd9041baf7f64c121e0172f305c7">01166</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga45c6fd9041baf7f64c121e0172f305c7" title="Configures the TIMx Prescaler.">TIM_PrescalerConfig</a>(TIM_TypeDef* TIMx, uint16_t Prescaler, uint16_t TIM_PSCReloadMode)
<a name="l01167"></a>01167 {
<a name="l01168"></a>01168   <span class="comment">/* Check the parameters */</span>
<a name="l01169"></a>01169   assert_param(IS_TIM_ALL_PERIPH(TIMx));
<a name="l01170"></a>01170   assert_param(IS_TIM_PRESCALER_RELOAD(TIM_PSCReloadMode));
<a name="l01171"></a>01171   <span class="comment">/* Set the Prescaler value */</span>
<a name="l01172"></a>01172   TIMx-&gt;PSC = Prescaler;
<a name="l01173"></a>01173   <span class="comment">/* Set or reset the UG Bit */</span>
<a name="l01174"></a>01174   TIMx-&gt;EGR = TIM_PSCReloadMode;
<a name="l01175"></a>01175 }
<a name="l01176"></a>01176 
<a name="l01189"></a><a class="code" href="group___t_i_m___private___functions.html#ga93941c1db20bf3794f377307df90a67b">01189</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga93941c1db20bf3794f377307df90a67b" title="Specifies the TIMx Counter Mode to be used.">TIM_CounterModeConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_CounterMode)
<a name="l01190"></a>01190 {
<a name="l01191"></a>01191   uint16_t tmpcr1 = 0;
<a name="l01192"></a>01192   <span class="comment">/* Check the parameters */</span>
<a name="l01193"></a>01193   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l01194"></a>01194   assert_param(IS_TIM_COUNTER_MODE(TIM_CounterMode));
<a name="l01195"></a>01195   tmpcr1 = TIMx-&gt;CR1;
<a name="l01196"></a>01196   <span class="comment">/* Reset the CMS and DIR Bits */</span>
<a name="l01197"></a>01197   tmpcr1 &amp;= (uint16_t)(~((uint16_t)(TIM_CR1_DIR | TIM_CR1_CMS)));
<a name="l01198"></a>01198   <span class="comment">/* Set the Counter Mode */</span>
<a name="l01199"></a>01199   tmpcr1 |= TIM_CounterMode;
<a name="l01200"></a>01200   <span class="comment">/* Write to TIMx CR1 register */</span>
<a name="l01201"></a>01201   TIMx-&gt;CR1 = tmpcr1;
<a name="l01202"></a>01202 }
<a name="l01203"></a>01203 
<a name="l01219"></a><a class="code" href="group___t_i_m___private___functions.html#ga4252583c6ae8a73d6fc66f7e951dbc35">01219</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga4252583c6ae8a73d6fc66f7e951dbc35" title="Selects the Input Trigger source.">TIM_SelectInputTrigger</a>(TIM_TypeDef* TIMx, uint16_t TIM_InputTriggerSource)
<a name="l01220"></a>01220 {
<a name="l01221"></a>01221   uint16_t tmpsmcr = 0;
<a name="l01222"></a>01222   <span class="comment">/* Check the parameters */</span>
<a name="l01223"></a>01223   assert_param(IS_TIM_LIST6_PERIPH(TIMx));
<a name="l01224"></a>01224   assert_param(IS_TIM_TRIGGER_SELECTION(TIM_InputTriggerSource));
<a name="l01225"></a>01225   <span class="comment">/* Get the TIMx SMCR register value */</span>
<a name="l01226"></a>01226   tmpsmcr = TIMx-&gt;SMCR;
<a name="l01227"></a>01227   <span class="comment">/* Reset the TS Bits */</span>
<a name="l01228"></a>01228   tmpsmcr &amp;= (uint16_t)(~((uint16_t)TIM_SMCR_TS));
<a name="l01229"></a>01229   <span class="comment">/* Set the Input Trigger source */</span>
<a name="l01230"></a>01230   tmpsmcr |= TIM_InputTriggerSource;
<a name="l01231"></a>01231   <span class="comment">/* Write to TIMx SMCR */</span>
<a name="l01232"></a>01232   TIMx-&gt;SMCR = tmpsmcr;
<a name="l01233"></a>01233 }
<a name="l01234"></a>01234 
<a name="l01254"></a><a class="code" href="group___t_i_m___private___functions.html#ga0fc7e76c47a3bd1ba1ebc71427832b51">01254</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga0fc7e76c47a3bd1ba1ebc71427832b51" title="Configures the TIMx Encoder Interface.">TIM_EncoderInterfaceConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_EncoderMode,
<a name="l01255"></a>01255                                 uint16_t TIM_IC1Polarity, uint16_t TIM_IC2Polarity)
<a name="l01256"></a>01256 {
<a name="l01257"></a>01257   uint16_t tmpsmcr = 0;
<a name="l01258"></a>01258   uint16_t tmpccmr1 = 0;
<a name="l01259"></a>01259   uint16_t tmpccer = 0;
<a name="l01260"></a>01260     
<a name="l01261"></a>01261   <span class="comment">/* Check the parameters */</span>
<a name="l01262"></a>01262   assert_param(IS_TIM_LIST5_PERIPH(TIMx));
<a name="l01263"></a>01263   assert_param(IS_TIM_ENCODER_MODE(TIM_EncoderMode));
<a name="l01264"></a>01264   assert_param(IS_TIM_IC_POLARITY(TIM_IC1Polarity));
<a name="l01265"></a>01265   assert_param(IS_TIM_IC_POLARITY(TIM_IC2Polarity));
<a name="l01266"></a>01266 
<a name="l01267"></a>01267   <span class="comment">/* Get the TIMx SMCR register value */</span>
<a name="l01268"></a>01268   tmpsmcr = TIMx-&gt;SMCR;
<a name="l01269"></a>01269   
<a name="l01270"></a>01270   <span class="comment">/* Get the TIMx CCMR1 register value */</span>
<a name="l01271"></a>01271   tmpccmr1 = TIMx-&gt;CCMR1;
<a name="l01272"></a>01272   
<a name="l01273"></a>01273   <span class="comment">/* Get the TIMx CCER register value */</span>
<a name="l01274"></a>01274   tmpccer = TIMx-&gt;CCER;
<a name="l01275"></a>01275   
<a name="l01276"></a>01276   <span class="comment">/* Set the encoder Mode */</span>
<a name="l01277"></a>01277   tmpsmcr &amp;= (uint16_t)(~((uint16_t)TIM_SMCR_SMS));
<a name="l01278"></a>01278   tmpsmcr |= TIM_EncoderMode;
<a name="l01279"></a>01279   
<a name="l01280"></a>01280   <span class="comment">/* Select the Capture Compare 1 and the Capture Compare 2 as input */</span>
<a name="l01281"></a>01281   tmpccmr1 &amp;= (uint16_t)(((uint16_t)~((uint16_t)TIM_CCMR1_CC1S)) &amp; (uint16_t)(~((uint16_t)TIM_CCMR1_CC2S)));
<a name="l01282"></a>01282   tmpccmr1 |= TIM_CCMR1_CC1S_0 | TIM_CCMR1_CC2S_0;
<a name="l01283"></a>01283   
<a name="l01284"></a>01284   <span class="comment">/* Set the TI1 and the TI2 Polarities */</span>
<a name="l01285"></a>01285   tmpccer &amp;= (uint16_t)(((uint16_t)~((uint16_t)TIM_CCER_CC1P)) &amp; ((uint16_t)~((uint16_t)TIM_CCER_CC2P)));
<a name="l01286"></a>01286   tmpccer |= (uint16_t)(TIM_IC1Polarity | (uint16_t)(TIM_IC2Polarity &lt;&lt; (uint16_t)4));
<a name="l01287"></a>01287   
<a name="l01288"></a>01288   <span class="comment">/* Write to TIMx SMCR */</span>
<a name="l01289"></a>01289   TIMx-&gt;SMCR = tmpsmcr;
<a name="l01290"></a>01290   <span class="comment">/* Write to TIMx CCMR1 */</span>
<a name="l01291"></a>01291   TIMx-&gt;CCMR1 = tmpccmr1;
<a name="l01292"></a>01292   <span class="comment">/* Write to TIMx CCER */</span>
<a name="l01293"></a>01293   TIMx-&gt;CCER = tmpccer;
<a name="l01294"></a>01294 }
<a name="l01295"></a>01295 
<a name="l01305"></a><a class="code" href="group___t_i_m___private___functions.html#ga4f58c12e6493a0d8b9555c9097b831d6">01305</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga4f58c12e6493a0d8b9555c9097b831d6" title="Forces the TIMx output 1 waveform to active or inactive level.">TIM_ForcedOC1Config</a>(TIM_TypeDef* TIMx, uint16_t TIM_ForcedAction)
<a name="l01306"></a>01306 {
<a name="l01307"></a>01307   uint16_t tmpccmr1 = 0;
<a name="l01308"></a>01308   <span class="comment">/* Check the parameters */</span>
<a name="l01309"></a>01309   assert_param(IS_TIM_LIST8_PERIPH(TIMx));
<a name="l01310"></a>01310   assert_param(IS_TIM_FORCED_ACTION(TIM_ForcedAction));
<a name="l01311"></a>01311   tmpccmr1 = TIMx-&gt;CCMR1;
<a name="l01312"></a>01312   <span class="comment">/* Reset the OC1M Bits */</span>
<a name="l01313"></a>01313   tmpccmr1 &amp;= (uint16_t)~((uint16_t)TIM_CCMR1_OC1M);
<a name="l01314"></a>01314   <span class="comment">/* Configure The Forced output Mode */</span>
<a name="l01315"></a>01315   tmpccmr1 |= TIM_ForcedAction;
<a name="l01316"></a>01316   <span class="comment">/* Write to TIMx CCMR1 register */</span>
<a name="l01317"></a>01317   TIMx-&gt;CCMR1 = tmpccmr1;
<a name="l01318"></a>01318 }
<a name="l01319"></a>01319 
<a name="l01329"></a><a class="code" href="group___t_i_m___private___functions.html#ga3d2902b6fbab8dd55cd531055ffcc63d">01329</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga3d2902b6fbab8dd55cd531055ffcc63d" title="Forces the TIMx output 2 waveform to active or inactive level.">TIM_ForcedOC2Config</a>(TIM_TypeDef* TIMx, uint16_t TIM_ForcedAction)
<a name="l01330"></a>01330 {
<a name="l01331"></a>01331   uint16_t tmpccmr1 = 0;
<a name="l01332"></a>01332   <span class="comment">/* Check the parameters */</span>
<a name="l01333"></a>01333   assert_param(IS_TIM_LIST6_PERIPH(TIMx));
<a name="l01334"></a>01334   assert_param(IS_TIM_FORCED_ACTION(TIM_ForcedAction));
<a name="l01335"></a>01335   tmpccmr1 = TIMx-&gt;CCMR1;
<a name="l01336"></a>01336   <span class="comment">/* Reset the OC2M Bits */</span>
<a name="l01337"></a>01337   tmpccmr1 &amp;= (uint16_t)~((uint16_t)TIM_CCMR1_OC2M);
<a name="l01338"></a>01338   <span class="comment">/* Configure The Forced output Mode */</span>
<a name="l01339"></a>01339   tmpccmr1 |= (uint16_t)(TIM_ForcedAction &lt;&lt; 8);
<a name="l01340"></a>01340   <span class="comment">/* Write to TIMx CCMR1 register */</span>
<a name="l01341"></a>01341   TIMx-&gt;CCMR1 = tmpccmr1;
<a name="l01342"></a>01342 }
<a name="l01343"></a>01343 
<a name="l01353"></a><a class="code" href="group___t_i_m___private___functions.html#ga920b0fb4ca44fceffd1c3e441feebd8f">01353</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga920b0fb4ca44fceffd1c3e441feebd8f" title="Forces the TIMx output 3 waveform to active or inactive level.">TIM_ForcedOC3Config</a>(TIM_TypeDef* TIMx, uint16_t TIM_ForcedAction)
<a name="l01354"></a>01354 {
<a name="l01355"></a>01355   uint16_t tmpccmr2 = 0;
<a name="l01356"></a>01356   <span class="comment">/* Check the parameters */</span>
<a name="l01357"></a>01357   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l01358"></a>01358   assert_param(IS_TIM_FORCED_ACTION(TIM_ForcedAction));
<a name="l01359"></a>01359   tmpccmr2 = TIMx-&gt;CCMR2;
<a name="l01360"></a>01360   <span class="comment">/* Reset the OC1M Bits */</span>
<a name="l01361"></a>01361   tmpccmr2 &amp;= (uint16_t)~((uint16_t)TIM_CCMR2_OC3M);
<a name="l01362"></a>01362   <span class="comment">/* Configure The Forced output Mode */</span>
<a name="l01363"></a>01363   tmpccmr2 |= TIM_ForcedAction;
<a name="l01364"></a>01364   <span class="comment">/* Write to TIMx CCMR2 register */</span>
<a name="l01365"></a>01365   TIMx-&gt;CCMR2 = tmpccmr2;
<a name="l01366"></a>01366 }
<a name="l01367"></a>01367 
<a name="l01377"></a><a class="code" href="group___t_i_m___private___functions.html#gaf0a0bbe74251e56d4b835d20b0a3aa63">01377</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#gaf0a0bbe74251e56d4b835d20b0a3aa63" title="Forces the TIMx output 4 waveform to active or inactive level.">TIM_ForcedOC4Config</a>(TIM_TypeDef* TIMx, uint16_t TIM_ForcedAction)
<a name="l01378"></a>01378 {
<a name="l01379"></a>01379   uint16_t tmpccmr2 = 0;
<a name="l01380"></a>01380   <span class="comment">/* Check the parameters */</span>
<a name="l01381"></a>01381   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l01382"></a>01382   assert_param(IS_TIM_FORCED_ACTION(TIM_ForcedAction));
<a name="l01383"></a>01383   tmpccmr2 = TIMx-&gt;CCMR2;
<a name="l01384"></a>01384   <span class="comment">/* Reset the OC2M Bits */</span>
<a name="l01385"></a>01385   tmpccmr2 &amp;= (uint16_t)~((uint16_t)TIM_CCMR2_OC4M);
<a name="l01386"></a>01386   <span class="comment">/* Configure The Forced output Mode */</span>
<a name="l01387"></a>01387   tmpccmr2 |= (uint16_t)(TIM_ForcedAction &lt;&lt; 8);
<a name="l01388"></a>01388   <span class="comment">/* Write to TIMx CCMR2 register */</span>
<a name="l01389"></a>01389   TIMx-&gt;CCMR2 = tmpccmr2;
<a name="l01390"></a>01390 }
<a name="l01391"></a>01391 
<a name="l01399"></a><a class="code" href="group___t_i_m___private___functions.html#ga42b44b9fc2b0798d733720dd6bac1ac0">01399</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga42b44b9fc2b0798d733720dd6bac1ac0" title="Enables or disables TIMx peripheral Preload register on ARR.">TIM_ARRPreloadConfig</a>(TIM_TypeDef* TIMx, FunctionalState NewState)
<a name="l01400"></a>01400 {
<a name="l01401"></a>01401   <span class="comment">/* Check the parameters */</span>
<a name="l01402"></a>01402   assert_param(IS_TIM_ALL_PERIPH(TIMx));
<a name="l01403"></a>01403   assert_param(IS_FUNCTIONAL_STATE(NewState));
<a name="l01404"></a>01404   <span class="keywordflow">if</span> (NewState != DISABLE)
<a name="l01405"></a>01405   {
<a name="l01406"></a>01406     <span class="comment">/* Set the ARR Preload Bit */</span>
<a name="l01407"></a>01407     TIMx-&gt;CR1 |= TIM_CR1_ARPE;
<a name="l01408"></a>01408   }
<a name="l01409"></a>01409   <span class="keywordflow">else</span>
<a name="l01410"></a>01410   {
<a name="l01411"></a>01411     <span class="comment">/* Reset the ARR Preload Bit */</span>
<a name="l01412"></a>01412     TIMx-&gt;CR1 &amp;= (uint16_t)~((uint16_t)TIM_CR1_ARPE);
<a name="l01413"></a>01413   }
<a name="l01414"></a>01414 }
<a name="l01415"></a>01415 
<a name="l01423"></a><a class="code" href="group___t_i_m___private___functions.html#gaff2e7f9959b1b36e830df028c14accc8">01423</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#gaff2e7f9959b1b36e830df028c14accc8" title="Selects the TIM peripheral Commutation event.">TIM_SelectCOM</a>(TIM_TypeDef* TIMx, FunctionalState NewState)
<a name="l01424"></a>01424 {
<a name="l01425"></a>01425   <span class="comment">/* Check the parameters */</span>
<a name="l01426"></a>01426   assert_param(IS_TIM_LIST2_PERIPH(TIMx));
<a name="l01427"></a>01427   assert_param(IS_FUNCTIONAL_STATE(NewState));
<a name="l01428"></a>01428   <span class="keywordflow">if</span> (NewState != DISABLE)
<a name="l01429"></a>01429   {
<a name="l01430"></a>01430     <span class="comment">/* Set the COM Bit */</span>
<a name="l01431"></a>01431     TIMx-&gt;CR2 |= TIM_CR2_CCUS;
<a name="l01432"></a>01432   }
<a name="l01433"></a>01433   <span class="keywordflow">else</span>
<a name="l01434"></a>01434   {
<a name="l01435"></a>01435     <span class="comment">/* Reset the COM Bit */</span>
<a name="l01436"></a>01436     TIMx-&gt;CR2 &amp;= (uint16_t)~((uint16_t)TIM_CR2_CCUS);
<a name="l01437"></a>01437   }
<a name="l01438"></a>01438 }
<a name="l01439"></a>01439 
<a name="l01448"></a><a class="code" href="group___t_i_m___private___functions.html#ga5273cb65acb885fe7982827b1c6b7d75">01448</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga5273cb65acb885fe7982827b1c6b7d75" title="Selects the TIMx peripheral Capture Compare DMA source.">TIM_SelectCCDMA</a>(TIM_TypeDef* TIMx, FunctionalState NewState)
<a name="l01449"></a>01449 {
<a name="l01450"></a>01450   <span class="comment">/* Check the parameters */</span>
<a name="l01451"></a>01451   assert_param(IS_TIM_LIST4_PERIPH(TIMx));
<a name="l01452"></a>01452   assert_param(IS_FUNCTIONAL_STATE(NewState));
<a name="l01453"></a>01453   <span class="keywordflow">if</span> (NewState != DISABLE)
<a name="l01454"></a>01454   {
<a name="l01455"></a>01455     <span class="comment">/* Set the CCDS Bit */</span>
<a name="l01456"></a>01456     TIMx-&gt;CR2 |= TIM_CR2_CCDS;
<a name="l01457"></a>01457   }
<a name="l01458"></a>01458   <span class="keywordflow">else</span>
<a name="l01459"></a>01459   {
<a name="l01460"></a>01460     <span class="comment">/* Reset the CCDS Bit */</span>
<a name="l01461"></a>01461     TIMx-&gt;CR2 &amp;= (uint16_t)~((uint16_t)TIM_CR2_CCDS);
<a name="l01462"></a>01462   }
<a name="l01463"></a>01463 }
<a name="l01464"></a>01464 
<a name="l01473"></a><a class="code" href="group___t_i_m___private___functions.html#ga0a935254e44312b1d78e8684a58db3c1">01473</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga0a935254e44312b1d78e8684a58db3c1" title="Sets or Resets the TIM peripheral Capture Compare Preload Control bit.">TIM_CCPreloadControl</a>(TIM_TypeDef* TIMx, FunctionalState NewState)
<a name="l01474"></a>01474 { 
<a name="l01475"></a>01475   <span class="comment">/* Check the parameters */</span>
<a name="l01476"></a>01476   assert_param(IS_TIM_LIST5_PERIPH(TIMx));
<a name="l01477"></a>01477   assert_param(IS_FUNCTIONAL_STATE(NewState));
<a name="l01478"></a>01478   <span class="keywordflow">if</span> (NewState != DISABLE)
<a name="l01479"></a>01479   {
<a name="l01480"></a>01480     <span class="comment">/* Set the CCPC Bit */</span>
<a name="l01481"></a>01481     TIMx-&gt;CR2 |= TIM_CR2_CCPC;
<a name="l01482"></a>01482   }
<a name="l01483"></a>01483   <span class="keywordflow">else</span>
<a name="l01484"></a>01484   {
<a name="l01485"></a>01485     <span class="comment">/* Reset the CCPC Bit */</span>
<a name="l01486"></a>01486     TIMx-&gt;CR2 &amp;= (uint16_t)~((uint16_t)TIM_CR2_CCPC);
<a name="l01487"></a>01487   }
<a name="l01488"></a>01488 }
<a name="l01489"></a>01489 
<a name="l01499"></a><a class="code" href="group___t_i_m___private___functions.html#ga60e6c29ad8f919bef616cf8e3306dd64">01499</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga60e6c29ad8f919bef616cf8e3306dd64" title="Enables or disables the TIMx peripheral Preload register on CCR1.">TIM_OC1PreloadConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_OCPreload)
<a name="l01500"></a>01500 {
<a name="l01501"></a>01501   uint16_t tmpccmr1 = 0;
<a name="l01502"></a>01502   <span class="comment">/* Check the parameters */</span>
<a name="l01503"></a>01503   assert_param(IS_TIM_LIST8_PERIPH(TIMx));
<a name="l01504"></a>01504   assert_param(IS_TIM_OCPRELOAD_STATE(TIM_OCPreload));
<a name="l01505"></a>01505   tmpccmr1 = TIMx-&gt;CCMR1;
<a name="l01506"></a>01506   <span class="comment">/* Reset the OC1PE Bit */</span>
<a name="l01507"></a>01507   tmpccmr1 &amp;= (uint16_t)~((uint16_t)TIM_CCMR1_OC1PE);
<a name="l01508"></a>01508   <span class="comment">/* Enable or Disable the Output Compare Preload feature */</span>
<a name="l01509"></a>01509   tmpccmr1 |= TIM_OCPreload;
<a name="l01510"></a>01510   <span class="comment">/* Write to TIMx CCMR1 register */</span>
<a name="l01511"></a>01511   TIMx-&gt;CCMR1 = tmpccmr1;
<a name="l01512"></a>01512 }
<a name="l01513"></a>01513 
<a name="l01524"></a><a class="code" href="group___t_i_m___private___functions.html#ga75b4614c6dd2cd52f2c5becdb6590c10">01524</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga75b4614c6dd2cd52f2c5becdb6590c10" title="Enables or disables the TIMx peripheral Preload register on CCR2.">TIM_OC2PreloadConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_OCPreload)
<a name="l01525"></a>01525 {
<a name="l01526"></a>01526   uint16_t tmpccmr1 = 0;
<a name="l01527"></a>01527   <span class="comment">/* Check the parameters */</span>
<a name="l01528"></a>01528   assert_param(IS_TIM_LIST6_PERIPH(TIMx));
<a name="l01529"></a>01529   assert_param(IS_TIM_OCPRELOAD_STATE(TIM_OCPreload));
<a name="l01530"></a>01530   tmpccmr1 = TIMx-&gt;CCMR1;
<a name="l01531"></a>01531   <span class="comment">/* Reset the OC2PE Bit */</span>
<a name="l01532"></a>01532   tmpccmr1 &amp;= (uint16_t)~((uint16_t)TIM_CCMR1_OC2PE);
<a name="l01533"></a>01533   <span class="comment">/* Enable or Disable the Output Compare Preload feature */</span>
<a name="l01534"></a>01534   tmpccmr1 |= (uint16_t)(TIM_OCPreload &lt;&lt; 8);
<a name="l01535"></a>01535   <span class="comment">/* Write to TIMx CCMR1 register */</span>
<a name="l01536"></a>01536   TIMx-&gt;CCMR1 = tmpccmr1;
<a name="l01537"></a>01537 }
<a name="l01538"></a>01538 
<a name="l01548"></a><a class="code" href="group___t_i_m___private___functions.html#ga8b2391685a519e60e596b7d596f86f09">01548</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga8b2391685a519e60e596b7d596f86f09" title="Enables or disables the TIMx peripheral Preload register on CCR3.">TIM_OC3PreloadConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_OCPreload)
<a name="l01549"></a>01549 {
<a name="l01550"></a>01550   uint16_t tmpccmr2 = 0;
<a name="l01551"></a>01551   <span class="comment">/* Check the parameters */</span>
<a name="l01552"></a>01552   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l01553"></a>01553   assert_param(IS_TIM_OCPRELOAD_STATE(TIM_OCPreload));
<a name="l01554"></a>01554   tmpccmr2 = TIMx-&gt;CCMR2;
<a name="l01555"></a>01555   <span class="comment">/* Reset the OC3PE Bit */</span>
<a name="l01556"></a>01556   tmpccmr2 &amp;= (uint16_t)~((uint16_t)TIM_CCMR2_OC3PE);
<a name="l01557"></a>01557   <span class="comment">/* Enable or Disable the Output Compare Preload feature */</span>
<a name="l01558"></a>01558   tmpccmr2 |= TIM_OCPreload;
<a name="l01559"></a>01559   <span class="comment">/* Write to TIMx CCMR2 register */</span>
<a name="l01560"></a>01560   TIMx-&gt;CCMR2 = tmpccmr2;
<a name="l01561"></a>01561 }
<a name="l01562"></a>01562 
<a name="l01572"></a><a class="code" href="group___t_i_m___private___functions.html#ga8bf4dfb35ff0c7b494dd96579f50b1ec">01572</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga8bf4dfb35ff0c7b494dd96579f50b1ec" title="Enables or disables the TIMx peripheral Preload register on CCR4.">TIM_OC4PreloadConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_OCPreload)
<a name="l01573"></a>01573 {
<a name="l01574"></a>01574   uint16_t tmpccmr2 = 0;
<a name="l01575"></a>01575   <span class="comment">/* Check the parameters */</span>
<a name="l01576"></a>01576   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l01577"></a>01577   assert_param(IS_TIM_OCPRELOAD_STATE(TIM_OCPreload));
<a name="l01578"></a>01578   tmpccmr2 = TIMx-&gt;CCMR2;
<a name="l01579"></a>01579   <span class="comment">/* Reset the OC4PE Bit */</span>
<a name="l01580"></a>01580   tmpccmr2 &amp;= (uint16_t)~((uint16_t)TIM_CCMR2_OC4PE);
<a name="l01581"></a>01581   <span class="comment">/* Enable or Disable the Output Compare Preload feature */</span>
<a name="l01582"></a>01582   tmpccmr2 |= (uint16_t)(TIM_OCPreload &lt;&lt; 8);
<a name="l01583"></a>01583   <span class="comment">/* Write to TIMx CCMR2 register */</span>
<a name="l01584"></a>01584   TIMx-&gt;CCMR2 = tmpccmr2;
<a name="l01585"></a>01585 }
<a name="l01586"></a>01586 
<a name="l01596"></a><a class="code" href="group___t_i_m___private___functions.html#gaec82031ca62f31f5483195c09752a83a">01596</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#gaec82031ca62f31f5483195c09752a83a" title="Configures the TIMx Output Compare 1 Fast feature.">TIM_OC1FastConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_OCFast)
<a name="l01597"></a>01597 {
<a name="l01598"></a>01598   uint16_t tmpccmr1 = 0;
<a name="l01599"></a>01599   <span class="comment">/* Check the parameters */</span>
<a name="l01600"></a>01600   assert_param(IS_TIM_LIST8_PERIPH(TIMx));
<a name="l01601"></a>01601   assert_param(IS_TIM_OCFAST_STATE(TIM_OCFast));
<a name="l01602"></a>01602   <span class="comment">/* Get the TIMx CCMR1 register value */</span>
<a name="l01603"></a>01603   tmpccmr1 = TIMx-&gt;CCMR1;
<a name="l01604"></a>01604   <span class="comment">/* Reset the OC1FE Bit */</span>
<a name="l01605"></a>01605   tmpccmr1 &amp;= (uint16_t)~((uint16_t)TIM_CCMR1_OC1FE);
<a name="l01606"></a>01606   <span class="comment">/* Enable or Disable the Output Compare Fast Bit */</span>
<a name="l01607"></a>01607   tmpccmr1 |= TIM_OCFast;
<a name="l01608"></a>01608   <span class="comment">/* Write to TIMx CCMR1 */</span>
<a name="l01609"></a>01609   TIMx-&gt;CCMR1 = tmpccmr1;
<a name="l01610"></a>01610 }
<a name="l01611"></a>01611 
<a name="l01622"></a><a class="code" href="group___t_i_m___private___functions.html#ga413359c87f46c69f1ffe2dc8fb3a65e7">01622</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga413359c87f46c69f1ffe2dc8fb3a65e7" title="Configures the TIMx Output Compare 2 Fast feature.">TIM_OC2FastConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_OCFast)
<a name="l01623"></a>01623 {
<a name="l01624"></a>01624   uint16_t tmpccmr1 = 0;
<a name="l01625"></a>01625   <span class="comment">/* Check the parameters */</span>
<a name="l01626"></a>01626   assert_param(IS_TIM_LIST6_PERIPH(TIMx));
<a name="l01627"></a>01627   assert_param(IS_TIM_OCFAST_STATE(TIM_OCFast));
<a name="l01628"></a>01628   <span class="comment">/* Get the TIMx CCMR1 register value */</span>
<a name="l01629"></a>01629   tmpccmr1 = TIMx-&gt;CCMR1;
<a name="l01630"></a>01630   <span class="comment">/* Reset the OC2FE Bit */</span>
<a name="l01631"></a>01631   tmpccmr1 &amp;= (uint16_t)~((uint16_t)TIM_CCMR1_OC2FE);
<a name="l01632"></a>01632   <span class="comment">/* Enable or Disable the Output Compare Fast Bit */</span>
<a name="l01633"></a>01633   tmpccmr1 |= (uint16_t)(TIM_OCFast &lt;&lt; 8);
<a name="l01634"></a>01634   <span class="comment">/* Write to TIMx CCMR1 */</span>
<a name="l01635"></a>01635   TIMx-&gt;CCMR1 = tmpccmr1;
<a name="l01636"></a>01636 }
<a name="l01637"></a>01637 
<a name="l01647"></a><a class="code" href="group___t_i_m___private___functions.html#gab2f3698e6e56bd9b0a4be7056ba789e1">01647</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#gab2f3698e6e56bd9b0a4be7056ba789e1" title="Configures the TIMx Output Compare 3 Fast feature.">TIM_OC3FastConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_OCFast)
<a name="l01648"></a>01648 {
<a name="l01649"></a>01649   uint16_t tmpccmr2 = 0;
<a name="l01650"></a>01650   <span class="comment">/* Check the parameters */</span>
<a name="l01651"></a>01651   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l01652"></a>01652   assert_param(IS_TIM_OCFAST_STATE(TIM_OCFast));
<a name="l01653"></a>01653   <span class="comment">/* Get the TIMx CCMR2 register value */</span>
<a name="l01654"></a>01654   tmpccmr2 = TIMx-&gt;CCMR2;
<a name="l01655"></a>01655   <span class="comment">/* Reset the OC3FE Bit */</span>
<a name="l01656"></a>01656   tmpccmr2 &amp;= (uint16_t)~((uint16_t)TIM_CCMR2_OC3FE);
<a name="l01657"></a>01657   <span class="comment">/* Enable or Disable the Output Compare Fast Bit */</span>
<a name="l01658"></a>01658   tmpccmr2 |= TIM_OCFast;
<a name="l01659"></a>01659   <span class="comment">/* Write to TIMx CCMR2 */</span>
<a name="l01660"></a>01660   TIMx-&gt;CCMR2 = tmpccmr2;
<a name="l01661"></a>01661 }
<a name="l01662"></a>01662 
<a name="l01672"></a><a class="code" href="group___t_i_m___private___functions.html#ga58279a04e8ea5333f1079d3cce8dde12">01672</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga58279a04e8ea5333f1079d3cce8dde12" title="Configures the TIMx Output Compare 4 Fast feature.">TIM_OC4FastConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_OCFast)
<a name="l01673"></a>01673 {
<a name="l01674"></a>01674   uint16_t tmpccmr2 = 0;
<a name="l01675"></a>01675   <span class="comment">/* Check the parameters */</span>
<a name="l01676"></a>01676   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l01677"></a>01677   assert_param(IS_TIM_OCFAST_STATE(TIM_OCFast));
<a name="l01678"></a>01678   <span class="comment">/* Get the TIMx CCMR2 register value */</span>
<a name="l01679"></a>01679   tmpccmr2 = TIMx-&gt;CCMR2;
<a name="l01680"></a>01680   <span class="comment">/* Reset the OC4FE Bit */</span>
<a name="l01681"></a>01681   tmpccmr2 &amp;= (uint16_t)~((uint16_t)TIM_CCMR2_OC4FE);
<a name="l01682"></a>01682   <span class="comment">/* Enable or Disable the Output Compare Fast Bit */</span>
<a name="l01683"></a>01683   tmpccmr2 |= (uint16_t)(TIM_OCFast &lt;&lt; 8);
<a name="l01684"></a>01684   <span class="comment">/* Write to TIMx CCMR2 */</span>
<a name="l01685"></a>01685   TIMx-&gt;CCMR2 = tmpccmr2;
<a name="l01686"></a>01686 }
<a name="l01687"></a>01687 
<a name="l01697"></a><a class="code" href="group___t_i_m___private___functions.html#ga34e926cd8a99cfcc7480b2d6de5118b6">01697</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga34e926cd8a99cfcc7480b2d6de5118b6" title="Clears or safeguards the OCREF1 signal on an external event.">TIM_ClearOC1Ref</a>(TIM_TypeDef* TIMx, uint16_t TIM_OCClear)
<a name="l01698"></a>01698 {
<a name="l01699"></a>01699   uint16_t tmpccmr1 = 0;
<a name="l01700"></a>01700   <span class="comment">/* Check the parameters */</span>
<a name="l01701"></a>01701   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l01702"></a>01702   assert_param(IS_TIM_OCCLEAR_STATE(TIM_OCClear));
<a name="l01703"></a>01703 
<a name="l01704"></a>01704   tmpccmr1 = TIMx-&gt;CCMR1;
<a name="l01705"></a>01705 
<a name="l01706"></a>01706   <span class="comment">/* Reset the OC1CE Bit */</span>
<a name="l01707"></a>01707   tmpccmr1 &amp;= (uint16_t)~((uint16_t)TIM_CCMR1_OC1CE);
<a name="l01708"></a>01708   <span class="comment">/* Enable or Disable the Output Compare Clear Bit */</span>
<a name="l01709"></a>01709   tmpccmr1 |= TIM_OCClear;
<a name="l01710"></a>01710   <span class="comment">/* Write to TIMx CCMR1 register */</span>
<a name="l01711"></a>01711   TIMx-&gt;CCMR1 = tmpccmr1;
<a name="l01712"></a>01712 }
<a name="l01713"></a>01713 
<a name="l01723"></a><a class="code" href="group___t_i_m___private___functions.html#gac474ebc815d24c8a589969e0c68b27b0">01723</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#gac474ebc815d24c8a589969e0c68b27b0" title="Clears or safeguards the OCREF2 signal on an external event.">TIM_ClearOC2Ref</a>(TIM_TypeDef* TIMx, uint16_t TIM_OCClear)
<a name="l01724"></a>01724 {
<a name="l01725"></a>01725   uint16_t tmpccmr1 = 0;
<a name="l01726"></a>01726   <span class="comment">/* Check the parameters */</span>
<a name="l01727"></a>01727   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l01728"></a>01728   assert_param(IS_TIM_OCCLEAR_STATE(TIM_OCClear));
<a name="l01729"></a>01729   tmpccmr1 = TIMx-&gt;CCMR1;
<a name="l01730"></a>01730   <span class="comment">/* Reset the OC2CE Bit */</span>
<a name="l01731"></a>01731   tmpccmr1 &amp;= (uint16_t)~((uint16_t)TIM_CCMR1_OC2CE);
<a name="l01732"></a>01732   <span class="comment">/* Enable or Disable the Output Compare Clear Bit */</span>
<a name="l01733"></a>01733   tmpccmr1 |= (uint16_t)(TIM_OCClear &lt;&lt; 8);
<a name="l01734"></a>01734   <span class="comment">/* Write to TIMx CCMR1 register */</span>
<a name="l01735"></a>01735   TIMx-&gt;CCMR1 = tmpccmr1;
<a name="l01736"></a>01736 }
<a name="l01737"></a>01737 
<a name="l01747"></a><a class="code" href="group___t_i_m___private___functions.html#ga0bd9476a14bd346c319945ec4fa2bc67">01747</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga0bd9476a14bd346c319945ec4fa2bc67" title="Clears or safeguards the OCREF3 signal on an external event.">TIM_ClearOC3Ref</a>(TIM_TypeDef* TIMx, uint16_t TIM_OCClear)
<a name="l01748"></a>01748 {
<a name="l01749"></a>01749   uint16_t tmpccmr2 = 0;
<a name="l01750"></a>01750   <span class="comment">/* Check the parameters */</span>
<a name="l01751"></a>01751   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l01752"></a>01752   assert_param(IS_TIM_OCCLEAR_STATE(TIM_OCClear));
<a name="l01753"></a>01753   tmpccmr2 = TIMx-&gt;CCMR2;
<a name="l01754"></a>01754   <span class="comment">/* Reset the OC3CE Bit */</span>
<a name="l01755"></a>01755   tmpccmr2 &amp;= (uint16_t)~((uint16_t)TIM_CCMR2_OC3CE);
<a name="l01756"></a>01756   <span class="comment">/* Enable or Disable the Output Compare Clear Bit */</span>
<a name="l01757"></a>01757   tmpccmr2 |= TIM_OCClear;
<a name="l01758"></a>01758   <span class="comment">/* Write to TIMx CCMR2 register */</span>
<a name="l01759"></a>01759   TIMx-&gt;CCMR2 = tmpccmr2;
<a name="l01760"></a>01760 }
<a name="l01761"></a>01761 
<a name="l01771"></a><a class="code" href="group___t_i_m___private___functions.html#gaeee5fa66b26e7c6f71850272dc3028f3">01771</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#gaeee5fa66b26e7c6f71850272dc3028f3" title="Clears or safeguards the OCREF4 signal on an external event.">TIM_ClearOC4Ref</a>(TIM_TypeDef* TIMx, uint16_t TIM_OCClear)
<a name="l01772"></a>01772 {
<a name="l01773"></a>01773   uint16_t tmpccmr2 = 0;
<a name="l01774"></a>01774   <span class="comment">/* Check the parameters */</span>
<a name="l01775"></a>01775   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l01776"></a>01776   assert_param(IS_TIM_OCCLEAR_STATE(TIM_OCClear));
<a name="l01777"></a>01777   tmpccmr2 = TIMx-&gt;CCMR2;
<a name="l01778"></a>01778   <span class="comment">/* Reset the OC4CE Bit */</span>
<a name="l01779"></a>01779   tmpccmr2 &amp;= (uint16_t)~((uint16_t)TIM_CCMR2_OC4CE);
<a name="l01780"></a>01780   <span class="comment">/* Enable or Disable the Output Compare Clear Bit */</span>
<a name="l01781"></a>01781   tmpccmr2 |= (uint16_t)(TIM_OCClear &lt;&lt; 8);
<a name="l01782"></a>01782   <span class="comment">/* Write to TIMx CCMR2 register */</span>
<a name="l01783"></a>01783   TIMx-&gt;CCMR2 = tmpccmr2;
<a name="l01784"></a>01784 }
<a name="l01785"></a>01785 
<a name="l01795"></a><a class="code" href="group___t_i_m___private___functions.html#ga03878f78163485c8a3508cff2111c297">01795</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga03878f78163485c8a3508cff2111c297" title="Configures the TIMx channel 1 polarity.">TIM_OC1PolarityConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_OCPolarity)
<a name="l01796"></a>01796 {
<a name="l01797"></a>01797   uint16_t tmpccer = 0;
<a name="l01798"></a>01798   <span class="comment">/* Check the parameters */</span>
<a name="l01799"></a>01799   assert_param(IS_TIM_LIST8_PERIPH(TIMx));
<a name="l01800"></a>01800   assert_param(IS_TIM_OC_POLARITY(TIM_OCPolarity));
<a name="l01801"></a>01801   tmpccer = TIMx-&gt;CCER;
<a name="l01802"></a>01802   <span class="comment">/* Set or Reset the CC1P Bit */</span>
<a name="l01803"></a>01803   tmpccer &amp;= (uint16_t)~((uint16_t)TIM_CCER_CC1P);
<a name="l01804"></a>01804   tmpccer |= TIM_OCPolarity;
<a name="l01805"></a>01805   <span class="comment">/* Write to TIMx CCER register */</span>
<a name="l01806"></a>01806   TIMx-&gt;CCER = tmpccer;
<a name="l01807"></a>01807 }
<a name="l01808"></a>01808 
<a name="l01818"></a><a class="code" href="group___t_i_m___private___functions.html#ga3cb91578e7dd34ea7d09862482960445">01818</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga3cb91578e7dd34ea7d09862482960445" title="Configures the TIMx Channel 1N polarity.">TIM_OC1NPolarityConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_OCNPolarity)
<a name="l01819"></a>01819 {
<a name="l01820"></a>01820   uint16_t tmpccer = 0;
<a name="l01821"></a>01821   <span class="comment">/* Check the parameters */</span>
<a name="l01822"></a>01822   assert_param(IS_TIM_LIST2_PERIPH(TIMx));
<a name="l01823"></a>01823   assert_param(IS_TIM_OCN_POLARITY(TIM_OCNPolarity));
<a name="l01824"></a>01824    
<a name="l01825"></a>01825   tmpccer = TIMx-&gt;CCER;
<a name="l01826"></a>01826   <span class="comment">/* Set or Reset the CC1NP Bit */</span>
<a name="l01827"></a>01827   tmpccer &amp;= (uint16_t)~((uint16_t)TIM_CCER_CC1NP);
<a name="l01828"></a>01828   tmpccer |= TIM_OCNPolarity;
<a name="l01829"></a>01829   <span class="comment">/* Write to TIMx CCER register */</span>
<a name="l01830"></a>01830   TIMx-&gt;CCER = tmpccer;
<a name="l01831"></a>01831 }
<a name="l01832"></a>01832 
<a name="l01842"></a><a class="code" href="group___t_i_m___private___functions.html#ga6831cacaac1ef50291af94db94450797">01842</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga6831cacaac1ef50291af94db94450797" title="Configures the TIMx channel 2 polarity.">TIM_OC2PolarityConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_OCPolarity)
<a name="l01843"></a>01843 {
<a name="l01844"></a>01844   uint16_t tmpccer = 0;
<a name="l01845"></a>01845   <span class="comment">/* Check the parameters */</span>
<a name="l01846"></a>01846   assert_param(IS_TIM_LIST6_PERIPH(TIMx));
<a name="l01847"></a>01847   assert_param(IS_TIM_OC_POLARITY(TIM_OCPolarity));
<a name="l01848"></a>01848   tmpccer = TIMx-&gt;CCER;
<a name="l01849"></a>01849   <span class="comment">/* Set or Reset the CC2P Bit */</span>
<a name="l01850"></a>01850   tmpccer &amp;= (uint16_t)~((uint16_t)TIM_CCER_CC2P);
<a name="l01851"></a>01851   tmpccer |= (uint16_t)(TIM_OCPolarity &lt;&lt; 4);
<a name="l01852"></a>01852   <span class="comment">/* Write to TIMx CCER register */</span>
<a name="l01853"></a>01853   TIMx-&gt;CCER = tmpccer;
<a name="l01854"></a>01854 }
<a name="l01855"></a>01855 
<a name="l01865"></a><a class="code" href="group___t_i_m___private___functions.html#ga2fa6ea3a89f446b52b4e699272b70cad">01865</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga2fa6ea3a89f446b52b4e699272b70cad" title="Configures the TIMx Channel 2N polarity.">TIM_OC2NPolarityConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_OCNPolarity)
<a name="l01866"></a>01866 {
<a name="l01867"></a>01867   uint16_t tmpccer = 0;
<a name="l01868"></a>01868   <span class="comment">/* Check the parameters */</span>
<a name="l01869"></a>01869   assert_param(IS_TIM_LIST1_PERIPH(TIMx));
<a name="l01870"></a>01870   assert_param(IS_TIM_OCN_POLARITY(TIM_OCNPolarity));
<a name="l01871"></a>01871   
<a name="l01872"></a>01872   tmpccer = TIMx-&gt;CCER;
<a name="l01873"></a>01873   <span class="comment">/* Set or Reset the CC2NP Bit */</span>
<a name="l01874"></a>01874   tmpccer &amp;= (uint16_t)~((uint16_t)TIM_CCER_CC2NP);
<a name="l01875"></a>01875   tmpccer |= (uint16_t)(TIM_OCNPolarity &lt;&lt; 4);
<a name="l01876"></a>01876   <span class="comment">/* Write to TIMx CCER register */</span>
<a name="l01877"></a>01877   TIMx-&gt;CCER = tmpccer;
<a name="l01878"></a>01878 }
<a name="l01879"></a>01879 
<a name="l01889"></a><a class="code" href="group___t_i_m___private___functions.html#ga1ef43b03fe666495e80aac9741ae7ab0">01889</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga1ef43b03fe666495e80aac9741ae7ab0" title="Configures the TIMx channel 3 polarity.">TIM_OC3PolarityConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_OCPolarity)
<a name="l01890"></a>01890 {
<a name="l01891"></a>01891   uint16_t tmpccer = 0;
<a name="l01892"></a>01892   <span class="comment">/* Check the parameters */</span>
<a name="l01893"></a>01893   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l01894"></a>01894   assert_param(IS_TIM_OC_POLARITY(TIM_OCPolarity));
<a name="l01895"></a>01895   tmpccer = TIMx-&gt;CCER;
<a name="l01896"></a>01896   <span class="comment">/* Set or Reset the CC3P Bit */</span>
<a name="l01897"></a>01897   tmpccer &amp;= (uint16_t)~((uint16_t)TIM_CCER_CC3P);
<a name="l01898"></a>01898   tmpccer |= (uint16_t)(TIM_OCPolarity &lt;&lt; 8);
<a name="l01899"></a>01899   <span class="comment">/* Write to TIMx CCER register */</span>
<a name="l01900"></a>01900   TIMx-&gt;CCER = tmpccer;
<a name="l01901"></a>01901 }
<a name="l01902"></a>01902 
<a name="l01912"></a><a class="code" href="group___t_i_m___private___functions.html#gac710acc5b682e892584fc6f089f61dc2">01912</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#gac710acc5b682e892584fc6f089f61dc2" title="Configures the TIMx Channel 3N polarity.">TIM_OC3NPolarityConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_OCNPolarity)
<a name="l01913"></a>01913 {
<a name="l01914"></a>01914   uint16_t tmpccer = 0;
<a name="l01915"></a>01915  
<a name="l01916"></a>01916   <span class="comment">/* Check the parameters */</span>
<a name="l01917"></a>01917   assert_param(IS_TIM_LIST1_PERIPH(TIMx));
<a name="l01918"></a>01918   assert_param(IS_TIM_OCN_POLARITY(TIM_OCNPolarity));
<a name="l01919"></a>01919     
<a name="l01920"></a>01920   tmpccer = TIMx-&gt;CCER;
<a name="l01921"></a>01921   <span class="comment">/* Set or Reset the CC3NP Bit */</span>
<a name="l01922"></a>01922   tmpccer &amp;= (uint16_t)~((uint16_t)TIM_CCER_CC3NP);
<a name="l01923"></a>01923   tmpccer |= (uint16_t)(TIM_OCNPolarity &lt;&lt; 8);
<a name="l01924"></a>01924   <span class="comment">/* Write to TIMx CCER register */</span>
<a name="l01925"></a>01925   TIMx-&gt;CCER = tmpccer;
<a name="l01926"></a>01926 }
<a name="l01927"></a>01927 
<a name="l01937"></a><a class="code" href="group___t_i_m___private___functions.html#gad678410f7c7244f83daad93ce9d1056e">01937</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#gad678410f7c7244f83daad93ce9d1056e" title="Configures the TIMx channel 4 polarity.">TIM_OC4PolarityConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_OCPolarity)
<a name="l01938"></a>01938 {
<a name="l01939"></a>01939   uint16_t tmpccer = 0;
<a name="l01940"></a>01940   <span class="comment">/* Check the parameters */</span>
<a name="l01941"></a>01941   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l01942"></a>01942   assert_param(IS_TIM_OC_POLARITY(TIM_OCPolarity));
<a name="l01943"></a>01943   tmpccer = TIMx-&gt;CCER;
<a name="l01944"></a>01944   <span class="comment">/* Set or Reset the CC4P Bit */</span>
<a name="l01945"></a>01945   tmpccer &amp;= (uint16_t)~((uint16_t)TIM_CCER_CC4P);
<a name="l01946"></a>01946   tmpccer |= (uint16_t)(TIM_OCPolarity &lt;&lt; 12);
<a name="l01947"></a>01947   <span class="comment">/* Write to TIMx CCER register */</span>
<a name="l01948"></a>01948   TIMx-&gt;CCER = tmpccer;
<a name="l01949"></a>01949 }
<a name="l01950"></a>01950 
<a name="l01964"></a><a class="code" href="group___t_i_m___private___functions.html#ga3ecc4647d9ede261beb5e0535cf29ebb">01964</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga3ecc4647d9ede261beb5e0535cf29ebb" title="Enables or disables the TIM Capture Compare Channel x.">TIM_CCxCmd</a>(TIM_TypeDef* TIMx, uint16_t TIM_Channel, uint16_t TIM_CCx)
<a name="l01965"></a>01965 {
<a name="l01966"></a>01966   uint16_t tmp = 0;
<a name="l01967"></a>01967 
<a name="l01968"></a>01968   <span class="comment">/* Check the parameters */</span>
<a name="l01969"></a>01969   assert_param(IS_TIM_LIST8_PERIPH(TIMx));
<a name="l01970"></a>01970   assert_param(IS_TIM_CHANNEL(TIM_Channel));
<a name="l01971"></a>01971   assert_param(IS_TIM_CCX(TIM_CCx));
<a name="l01972"></a>01972 
<a name="l01973"></a>01973   tmp = CCER_CCE_Set &lt;&lt; TIM_Channel;
<a name="l01974"></a>01974 
<a name="l01975"></a>01975   <span class="comment">/* Reset the CCxE Bit */</span>
<a name="l01976"></a>01976   TIMx-&gt;CCER &amp;= (uint16_t)~ tmp;
<a name="l01977"></a>01977 
<a name="l01978"></a>01978   <span class="comment">/* Set or reset the CCxE Bit */</span> 
<a name="l01979"></a>01979   TIMx-&gt;CCER |=  (uint16_t)(TIM_CCx &lt;&lt; TIM_Channel);
<a name="l01980"></a>01980 }
<a name="l01981"></a>01981 
<a name="l01994"></a><a class="code" href="group___t_i_m___private___functions.html#ga304ff7c8a1615498da749bf2507e9f2b">01994</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga304ff7c8a1615498da749bf2507e9f2b" title="Enables or disables the TIM Capture Compare Channel xN.">TIM_CCxNCmd</a>(TIM_TypeDef* TIMx, uint16_t TIM_Channel, uint16_t TIM_CCxN)
<a name="l01995"></a>01995 {
<a name="l01996"></a>01996   uint16_t tmp = 0;
<a name="l01997"></a>01997 
<a name="l01998"></a>01998   <span class="comment">/* Check the parameters */</span>
<a name="l01999"></a>01999   assert_param(IS_TIM_LIST2_PERIPH(TIMx));
<a name="l02000"></a>02000   assert_param(IS_TIM_COMPLEMENTARY_CHANNEL(TIM_Channel));
<a name="l02001"></a>02001   assert_param(IS_TIM_CCXN(TIM_CCxN));
<a name="l02002"></a>02002 
<a name="l02003"></a>02003   tmp = CCER_CCNE_Set &lt;&lt; TIM_Channel;
<a name="l02004"></a>02004 
<a name="l02005"></a>02005   <span class="comment">/* Reset the CCxNE Bit */</span>
<a name="l02006"></a>02006   TIMx-&gt;CCER &amp;= (uint16_t) ~tmp;
<a name="l02007"></a>02007 
<a name="l02008"></a>02008   <span class="comment">/* Set or reset the CCxNE Bit */</span> 
<a name="l02009"></a>02009   TIMx-&gt;CCER |=  (uint16_t)(TIM_CCxN &lt;&lt; TIM_Channel);
<a name="l02010"></a>02010 }
<a name="l02011"></a>02011 
<a name="l02035"></a><a class="code" href="group___t_i_m___private___functions.html#ga83ea0af5a7c1af521236ce5e4d2c42b0">02035</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga83ea0af5a7c1af521236ce5e4d2c42b0" title="Selects the TIM Ouput Compare Mode.">TIM_SelectOCxM</a>(TIM_TypeDef* TIMx, uint16_t TIM_Channel, uint16_t TIM_OCMode)
<a name="l02036"></a>02036 {
<a name="l02037"></a>02037   uint32_t tmp = 0;
<a name="l02038"></a>02038   uint16_t tmp1 = 0;
<a name="l02039"></a>02039 
<a name="l02040"></a>02040   <span class="comment">/* Check the parameters */</span>
<a name="l02041"></a>02041   assert_param(IS_TIM_LIST8_PERIPH(TIMx));
<a name="l02042"></a>02042   assert_param(IS_TIM_CHANNEL(TIM_Channel));
<a name="l02043"></a>02043   assert_param(IS_TIM_OCM(TIM_OCMode));
<a name="l02044"></a>02044 
<a name="l02045"></a>02045   tmp = (uint32_t) TIMx;
<a name="l02046"></a>02046   tmp += CCMR_Offset;
<a name="l02047"></a>02047 
<a name="l02048"></a>02048   tmp1 = CCER_CCE_Set &lt;&lt; (uint16_t)TIM_Channel;
<a name="l02049"></a>02049 
<a name="l02050"></a>02050   <span class="comment">/* Disable the Channel: Reset the CCxE Bit */</span>
<a name="l02051"></a>02051   TIMx-&gt;CCER &amp;= (uint16_t) ~tmp1;
<a name="l02052"></a>02052 
<a name="l02053"></a>02053   <span class="keywordflow">if</span>((TIM_Channel == TIM_Channel_1) ||(TIM_Channel == TIM_Channel_3))
<a name="l02054"></a>02054   {
<a name="l02055"></a>02055     tmp += (TIM_Channel&gt;&gt;1);
<a name="l02056"></a>02056 
<a name="l02057"></a>02057     <span class="comment">/* Reset the OCxM bits in the CCMRx register */</span>
<a name="l02058"></a>02058     *(__IO uint32_t *) tmp &amp;= (uint32_t)~((uint32_t)TIM_CCMR1_OC1M);
<a name="l02059"></a>02059    
<a name="l02060"></a>02060     <span class="comment">/* Configure the OCxM bits in the CCMRx register */</span>
<a name="l02061"></a>02061     *(__IO uint32_t *) tmp |= TIM_OCMode;
<a name="l02062"></a>02062   }
<a name="l02063"></a>02063   <span class="keywordflow">else</span>
<a name="l02064"></a>02064   {
<a name="l02065"></a>02065     tmp += (uint16_t)(TIM_Channel - (uint16_t)4)&gt;&gt; (uint16_t)1;
<a name="l02066"></a>02066 
<a name="l02067"></a>02067     <span class="comment">/* Reset the OCxM bits in the CCMRx register */</span>
<a name="l02068"></a>02068     *(__IO uint32_t *) tmp &amp;= (uint32_t)~((uint32_t)TIM_CCMR1_OC2M);
<a name="l02069"></a>02069     
<a name="l02070"></a>02070     <span class="comment">/* Configure the OCxM bits in the CCMRx register */</span>
<a name="l02071"></a>02071     *(__IO uint32_t *) tmp |= (uint16_t)(TIM_OCMode &lt;&lt; 8);
<a name="l02072"></a>02072   }
<a name="l02073"></a>02073 }
<a name="l02074"></a>02074 
<a name="l02082"></a><a class="code" href="group___t_i_m___private___functions.html#gace2384dd33e849a054f61b8e1fc7e7c3">02082</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#gace2384dd33e849a054f61b8e1fc7e7c3" title="Enables or Disables the TIMx Update event.">TIM_UpdateDisableConfig</a>(TIM_TypeDef* TIMx, FunctionalState NewState)
<a name="l02083"></a>02083 {
<a name="l02084"></a>02084   <span class="comment">/* Check the parameters */</span>
<a name="l02085"></a>02085   assert_param(IS_TIM_ALL_PERIPH(TIMx));
<a name="l02086"></a>02086   assert_param(IS_FUNCTIONAL_STATE(NewState));
<a name="l02087"></a>02087   <span class="keywordflow">if</span> (NewState != DISABLE)
<a name="l02088"></a>02088   {
<a name="l02089"></a>02089     <span class="comment">/* Set the Update Disable Bit */</span>
<a name="l02090"></a>02090     TIMx-&gt;CR1 |= TIM_CR1_UDIS;
<a name="l02091"></a>02091   }
<a name="l02092"></a>02092   <span class="keywordflow">else</span>
<a name="l02093"></a>02093   {
<a name="l02094"></a>02094     <span class="comment">/* Reset the Update Disable Bit */</span>
<a name="l02095"></a>02095     TIMx-&gt;CR1 &amp;= (uint16_t)~((uint16_t)TIM_CR1_UDIS);
<a name="l02096"></a>02096   }
<a name="l02097"></a>02097 }
<a name="l02098"></a>02098 
<a name="l02110"></a><a class="code" href="group___t_i_m___private___functions.html#ga1d7a8f952e209de142499e67a653fc1f">02110</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga1d7a8f952e209de142499e67a653fc1f" title="Configures the TIMx Update Request Interrupt source.">TIM_UpdateRequestConfig</a>(TIM_TypeDef* TIMx, uint16_t TIM_UpdateSource)
<a name="l02111"></a>02111 {
<a name="l02112"></a>02112   <span class="comment">/* Check the parameters */</span>
<a name="l02113"></a>02113   assert_param(IS_TIM_ALL_PERIPH(TIMx));
<a name="l02114"></a>02114   assert_param(IS_TIM_UPDATE_SOURCE(TIM_UpdateSource));
<a name="l02115"></a>02115   <span class="keywordflow">if</span> (TIM_UpdateSource != TIM_UpdateSource_Global)
<a name="l02116"></a>02116   {
<a name="l02117"></a>02117     <span class="comment">/* Set the URS Bit */</span>
<a name="l02118"></a>02118     TIMx-&gt;CR1 |= TIM_CR1_URS;
<a name="l02119"></a>02119   }
<a name="l02120"></a>02120   <span class="keywordflow">else</span>
<a name="l02121"></a>02121   {
<a name="l02122"></a>02122     <span class="comment">/* Reset the URS Bit */</span>
<a name="l02123"></a>02123     TIMx-&gt;CR1 &amp;= (uint16_t)~((uint16_t)TIM_CR1_URS);
<a name="l02124"></a>02124   }
<a name="l02125"></a>02125 }
<a name="l02126"></a>02126 
<a name="l02134"></a><a class="code" href="group___t_i_m___private___functions.html#ga42c2d1025a3937c9d9f38631af86ffa4">02134</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga42c2d1025a3937c9d9f38631af86ffa4" title="Enables or disables the TIMxs Hall sensor interface.">TIM_SelectHallSensor</a>(TIM_TypeDef* TIMx, FunctionalState NewState)
<a name="l02135"></a>02135 {
<a name="l02136"></a>02136   <span class="comment">/* Check the parameters */</span>
<a name="l02137"></a>02137   assert_param(IS_TIM_LIST6_PERIPH(TIMx));
<a name="l02138"></a>02138   assert_param(IS_FUNCTIONAL_STATE(NewState));
<a name="l02139"></a>02139   <span class="keywordflow">if</span> (NewState != DISABLE)
<a name="l02140"></a>02140   {
<a name="l02141"></a>02141     <span class="comment">/* Set the TI1S Bit */</span>
<a name="l02142"></a>02142     TIMx-&gt;CR2 |= TIM_CR2_TI1S;
<a name="l02143"></a>02143   }
<a name="l02144"></a>02144   <span class="keywordflow">else</span>
<a name="l02145"></a>02145   {
<a name="l02146"></a>02146     <span class="comment">/* Reset the TI1S Bit */</span>
<a name="l02147"></a>02147     TIMx-&gt;CR2 &amp;= (uint16_t)~((uint16_t)TIM_CR2_TI1S);
<a name="l02148"></a>02148   }
<a name="l02149"></a>02149 }
<a name="l02150"></a>02150 
<a name="l02160"></a><a class="code" href="group___t_i_m___private___functions.html#gadd2cca5fac6c1291dc4339098d5c9562">02160</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#gadd2cca5fac6c1291dc4339098d5c9562" title="Selects the TIMxs One Pulse Mode.">TIM_SelectOnePulseMode</a>(TIM_TypeDef* TIMx, uint16_t TIM_OPMode)
<a name="l02161"></a>02161 {
<a name="l02162"></a>02162   <span class="comment">/* Check the parameters */</span>
<a name="l02163"></a>02163   assert_param(IS_TIM_ALL_PERIPH(TIMx));
<a name="l02164"></a>02164   assert_param(IS_TIM_OPM_MODE(TIM_OPMode));
<a name="l02165"></a>02165   <span class="comment">/* Reset the OPM Bit */</span>
<a name="l02166"></a>02166   TIMx-&gt;CR1 &amp;= (uint16_t)~((uint16_t)TIM_CR1_OPM);
<a name="l02167"></a>02167   <span class="comment">/* Configure the OPM Mode */</span>
<a name="l02168"></a>02168   TIMx-&gt;CR1 |= TIM_OPMode;
<a name="l02169"></a>02169 }
<a name="l02170"></a>02170 
<a name="l02192"></a><a class="code" href="group___t_i_m___private___functions.html#ga28745aaa549e2067e42c19569209e6c6">02192</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga28745aaa549e2067e42c19569209e6c6" title="Selects the TIMx Trigger Output Mode.">TIM_SelectOutputTrigger</a>(TIM_TypeDef* TIMx, uint16_t TIM_TRGOSource)
<a name="l02193"></a>02193 {
<a name="l02194"></a>02194   <span class="comment">/* Check the parameters */</span>
<a name="l02195"></a>02195   assert_param(IS_TIM_LIST7_PERIPH(TIMx));
<a name="l02196"></a>02196   assert_param(IS_TIM_TRGO_SOURCE(TIM_TRGOSource));
<a name="l02197"></a>02197   <span class="comment">/* Reset the MMS Bits */</span>
<a name="l02198"></a>02198   TIMx-&gt;CR2 &amp;= (uint16_t)~((uint16_t)TIM_CR2_MMS);
<a name="l02199"></a>02199   <span class="comment">/* Select the TRGO source */</span>
<a name="l02200"></a>02200   TIMx-&gt;CR2 |=  TIM_TRGOSource;
<a name="l02201"></a>02201 }
<a name="l02202"></a>02202 
<a name="l02215"></a><a class="code" href="group___t_i_m___private___functions.html#ga2f19ce1d90990691cf037e419ba08003">02215</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga2f19ce1d90990691cf037e419ba08003" title="Selects the TIMx Slave Mode.">TIM_SelectSlaveMode</a>(TIM_TypeDef* TIMx, uint16_t TIM_SlaveMode)
<a name="l02216"></a>02216 {
<a name="l02217"></a>02217   <span class="comment">/* Check the parameters */</span>
<a name="l02218"></a>02218   assert_param(IS_TIM_LIST6_PERIPH(TIMx));
<a name="l02219"></a>02219   assert_param(IS_TIM_SLAVE_MODE(TIM_SlaveMode));
<a name="l02220"></a>02220  <span class="comment">/* Reset the SMS Bits */</span>
<a name="l02221"></a>02221   TIMx-&gt;SMCR &amp;= (uint16_t)~((uint16_t)TIM_SMCR_SMS);
<a name="l02222"></a>02222   <span class="comment">/* Select the Slave Mode */</span>
<a name="l02223"></a>02223   TIMx-&gt;SMCR |= TIM_SlaveMode;
<a name="l02224"></a>02224 }
<a name="l02225"></a>02225 
<a name="l02236"></a><a class="code" href="group___t_i_m___private___functions.html#ga4dcc3d11b670c381d0ff9cb7e9fd01e2">02236</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga4dcc3d11b670c381d0ff9cb7e9fd01e2" title="Sets or Resets the TIMx Master/Slave Mode.">TIM_SelectMasterSlaveMode</a>(TIM_TypeDef* TIMx, uint16_t TIM_MasterSlaveMode)
<a name="l02237"></a>02237 {
<a name="l02238"></a>02238   <span class="comment">/* Check the parameters */</span>
<a name="l02239"></a>02239   assert_param(IS_TIM_LIST6_PERIPH(TIMx));
<a name="l02240"></a>02240   assert_param(IS_TIM_MSM_STATE(TIM_MasterSlaveMode));
<a name="l02241"></a>02241   <span class="comment">/* Reset the MSM Bit */</span>
<a name="l02242"></a>02242   TIMx-&gt;SMCR &amp;= (uint16_t)~((uint16_t)TIM_SMCR_MSM);
<a name="l02243"></a>02243   
<a name="l02244"></a>02244   <span class="comment">/* Set or Reset the MSM Bit */</span>
<a name="l02245"></a>02245   TIMx-&gt;SMCR |= TIM_MasterSlaveMode;
<a name="l02246"></a>02246 }
<a name="l02247"></a>02247 
<a name="l02254"></a><a class="code" href="group___t_i_m___private___functions.html#gaad2c31dc9c551b48f08b96ba49c4aa44">02254</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#gaad2c31dc9c551b48f08b96ba49c4aa44" title="Sets the TIMx Counter Register value.">TIM_SetCounter</a>(TIM_TypeDef* TIMx, uint16_t Counter)
<a name="l02255"></a>02255 {
<a name="l02256"></a>02256   <span class="comment">/* Check the parameters */</span>
<a name="l02257"></a>02257   assert_param(IS_TIM_ALL_PERIPH(TIMx));
<a name="l02258"></a>02258   <span class="comment">/* Set the Counter Register value */</span>
<a name="l02259"></a>02259   TIMx-&gt;CNT = Counter;
<a name="l02260"></a>02260 }
<a name="l02261"></a>02261 
<a name="l02268"></a><a class="code" href="group___t_i_m___private___functions.html#ga7880e4c00002d6421f9059a2ed841d5c">02268</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga7880e4c00002d6421f9059a2ed841d5c" title="Sets the TIMx Autoreload Register value.">TIM_SetAutoreload</a>(TIM_TypeDef* TIMx, uint16_t Autoreload)
<a name="l02269"></a>02269 {
<a name="l02270"></a>02270   <span class="comment">/* Check the parameters */</span>
<a name="l02271"></a>02271   assert_param(IS_TIM_ALL_PERIPH(TIMx));
<a name="l02272"></a>02272   <span class="comment">/* Set the Autoreload Register value */</span>
<a name="l02273"></a>02273   TIMx-&gt;ARR = Autoreload;
<a name="l02274"></a>02274 }
<a name="l02275"></a>02275 
<a name="l02282"></a><a class="code" href="group___t_i_m___private___functions.html#gab3a6031f187cb8af62eb09a67b4fd2ad">02282</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#gab3a6031f187cb8af62eb09a67b4fd2ad" title="Sets the TIMx Capture Compare1 Register value.">TIM_SetCompare1</a>(TIM_TypeDef* TIMx, uint16_t Compare1)
<a name="l02283"></a>02283 {
<a name="l02284"></a>02284   <span class="comment">/* Check the parameters */</span>
<a name="l02285"></a>02285   assert_param(IS_TIM_LIST8_PERIPH(TIMx));
<a name="l02286"></a>02286   <span class="comment">/* Set the Capture Compare1 Register value */</span>
<a name="l02287"></a>02287   TIMx-&gt;CCR1 = Compare1;
<a name="l02288"></a>02288 }
<a name="l02289"></a>02289 
<a name="l02296"></a><a class="code" href="group___t_i_m___private___functions.html#ga0175ef4fabade443909002a63d4e9758">02296</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga0175ef4fabade443909002a63d4e9758" title="Sets the TIMx Capture Compare2 Register value.">TIM_SetCompare2</a>(TIM_TypeDef* TIMx, uint16_t Compare2)
<a name="l02297"></a>02297 {
<a name="l02298"></a>02298   <span class="comment">/* Check the parameters */</span>
<a name="l02299"></a>02299   assert_param(IS_TIM_LIST6_PERIPH(TIMx));
<a name="l02300"></a>02300   <span class="comment">/* Set the Capture Compare2 Register value */</span>
<a name="l02301"></a>02301   TIMx-&gt;CCR2 = Compare2;
<a name="l02302"></a>02302 }
<a name="l02303"></a>02303 
<a name="l02310"></a><a class="code" href="group___t_i_m___private___functions.html#ga416df50f4223351e366ae40a4ec163ae">02310</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga416df50f4223351e366ae40a4ec163ae" title="Sets the TIMx Capture Compare3 Register value.">TIM_SetCompare3</a>(TIM_TypeDef* TIMx, uint16_t Compare3)
<a name="l02311"></a>02311 {
<a name="l02312"></a>02312   <span class="comment">/* Check the parameters */</span>
<a name="l02313"></a>02313   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l02314"></a>02314   <span class="comment">/* Set the Capture Compare3 Register value */</span>
<a name="l02315"></a>02315   TIMx-&gt;CCR3 = Compare3;
<a name="l02316"></a>02316 }
<a name="l02317"></a>02317 
<a name="l02324"></a><a class="code" href="group___t_i_m___private___functions.html#gaf428edf474804691d6f587e78c97a082">02324</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#gaf428edf474804691d6f587e78c97a082" title="Sets the TIMx Capture Compare4 Register value.">TIM_SetCompare4</a>(TIM_TypeDef* TIMx, uint16_t Compare4)
<a name="l02325"></a>02325 {
<a name="l02326"></a>02326   <span class="comment">/* Check the parameters */</span>
<a name="l02327"></a>02327   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l02328"></a>02328   <span class="comment">/* Set the Capture Compare4 Register value */</span>
<a name="l02329"></a>02329   TIMx-&gt;CCR4 = Compare4;
<a name="l02330"></a>02330 }
<a name="l02331"></a>02331 
<a name="l02343"></a><a class="code" href="group___t_i_m___private___functions.html#gaf0f684dea88e222de9689d8ed0ca8805">02343</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#gaf0f684dea88e222de9689d8ed0ca8805" title="Sets the TIMx Input Capture 1 prescaler.">TIM_SetIC1Prescaler</a>(TIM_TypeDef* TIMx, uint16_t TIM_ICPSC)
<a name="l02344"></a>02344 {
<a name="l02345"></a>02345   <span class="comment">/* Check the parameters */</span>
<a name="l02346"></a>02346   assert_param(IS_TIM_LIST8_PERIPH(TIMx));
<a name="l02347"></a>02347   assert_param(IS_TIM_IC_PRESCALER(TIM_ICPSC));
<a name="l02348"></a>02348   <span class="comment">/* Reset the IC1PSC Bits */</span>
<a name="l02349"></a>02349   TIMx-&gt;CCMR1 &amp;= (uint16_t)~((uint16_t)TIM_CCMR1_IC1PSC);
<a name="l02350"></a>02350   <span class="comment">/* Set the IC1PSC value */</span>
<a name="l02351"></a>02351   TIMx-&gt;CCMR1 |= TIM_ICPSC;
<a name="l02352"></a>02352 }
<a name="l02353"></a>02353 
<a name="l02365"></a><a class="code" href="group___t_i_m___private___functions.html#ga3cc4869b5fe73271808512c89322a325">02365</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga3cc4869b5fe73271808512c89322a325" title="Sets the TIMx Input Capture 2 prescaler.">TIM_SetIC2Prescaler</a>(TIM_TypeDef* TIMx, uint16_t TIM_ICPSC)
<a name="l02366"></a>02366 {
<a name="l02367"></a>02367   <span class="comment">/* Check the parameters */</span>
<a name="l02368"></a>02368   assert_param(IS_TIM_LIST6_PERIPH(TIMx));
<a name="l02369"></a>02369   assert_param(IS_TIM_IC_PRESCALER(TIM_ICPSC));
<a name="l02370"></a>02370   <span class="comment">/* Reset the IC2PSC Bits */</span>
<a name="l02371"></a>02371   TIMx-&gt;CCMR1 &amp;= (uint16_t)~((uint16_t)TIM_CCMR1_IC2PSC);
<a name="l02372"></a>02372   <span class="comment">/* Set the IC2PSC value */</span>
<a name="l02373"></a>02373   TIMx-&gt;CCMR1 |= (uint16_t)(TIM_ICPSC &lt;&lt; 8);
<a name="l02374"></a>02374 }
<a name="l02375"></a>02375 
<a name="l02387"></a><a class="code" href="group___t_i_m___private___functions.html#ga76f906383b8132ebe00dffadb70cf7f9">02387</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga76f906383b8132ebe00dffadb70cf7f9" title="Sets the TIMx Input Capture 3 prescaler.">TIM_SetIC3Prescaler</a>(TIM_TypeDef* TIMx, uint16_t TIM_ICPSC)
<a name="l02388"></a>02388 {
<a name="l02389"></a>02389   <span class="comment">/* Check the parameters */</span>
<a name="l02390"></a>02390   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l02391"></a>02391   assert_param(IS_TIM_IC_PRESCALER(TIM_ICPSC));
<a name="l02392"></a>02392   <span class="comment">/* Reset the IC3PSC Bits */</span>
<a name="l02393"></a>02393   TIMx-&gt;CCMR2 &amp;= (uint16_t)~((uint16_t)TIM_CCMR2_IC3PSC);
<a name="l02394"></a>02394   <span class="comment">/* Set the IC3PSC value */</span>
<a name="l02395"></a>02395   TIMx-&gt;CCMR2 |= TIM_ICPSC;
<a name="l02396"></a>02396 }
<a name="l02397"></a>02397 
<a name="l02409"></a><a class="code" href="group___t_i_m___private___functions.html#ga0f2c784271356d6b64b8c0da64dbdbc2">02409</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga0f2c784271356d6b64b8c0da64dbdbc2" title="Sets the TIMx Input Capture 4 prescaler.">TIM_SetIC4Prescaler</a>(TIM_TypeDef* TIMx, uint16_t TIM_ICPSC)
<a name="l02410"></a>02410 {  
<a name="l02411"></a>02411   <span class="comment">/* Check the parameters */</span>
<a name="l02412"></a>02412   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l02413"></a>02413   assert_param(IS_TIM_IC_PRESCALER(TIM_ICPSC));
<a name="l02414"></a>02414   <span class="comment">/* Reset the IC4PSC Bits */</span>
<a name="l02415"></a>02415   TIMx-&gt;CCMR2 &amp;= (uint16_t)~((uint16_t)TIM_CCMR2_IC4PSC);
<a name="l02416"></a>02416   <span class="comment">/* Set the IC4PSC value */</span>
<a name="l02417"></a>02417   TIMx-&gt;CCMR2 |= (uint16_t)(TIM_ICPSC &lt;&lt; 8);
<a name="l02418"></a>02418 }
<a name="l02419"></a>02419 
<a name="l02431"></a><a class="code" href="group___t_i_m___private___functions.html#ga20ef804dc32c723662d11ee7da3baab2">02431</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga20ef804dc32c723662d11ee7da3baab2" title="Sets the TIMx Clock Division value.">TIM_SetClockDivision</a>(TIM_TypeDef* TIMx, uint16_t TIM_CKD)
<a name="l02432"></a>02432 {
<a name="l02433"></a>02433   <span class="comment">/* Check the parameters */</span>
<a name="l02434"></a>02434   assert_param(IS_TIM_LIST8_PERIPH(TIMx));
<a name="l02435"></a>02435   assert_param(IS_TIM_CKD_DIV(TIM_CKD));
<a name="l02436"></a>02436   <span class="comment">/* Reset the CKD Bits */</span>
<a name="l02437"></a>02437   TIMx-&gt;CR1 &amp;= (uint16_t)~((uint16_t)TIM_CR1_CKD);
<a name="l02438"></a>02438   <span class="comment">/* Set the CKD value */</span>
<a name="l02439"></a>02439   TIMx-&gt;CR1 |= TIM_CKD;
<a name="l02440"></a>02440 }
<a name="l02441"></a>02441 
<a name="l02447"></a><a class="code" href="group___t_i_m___private___functions.html#ga29eb9f7151ceea94c3988539a5ee91cf">02447</a> uint16_t <a class="code" href="group___t_i_m___private___functions.html#ga29eb9f7151ceea94c3988539a5ee91cf" title="Gets the TIMx Input Capture 1 value.">TIM_GetCapture1</a>(TIM_TypeDef* TIMx)
<a name="l02448"></a>02448 {
<a name="l02449"></a>02449   <span class="comment">/* Check the parameters */</span>
<a name="l02450"></a>02450   assert_param(IS_TIM_LIST8_PERIPH(TIMx));
<a name="l02451"></a>02451   <span class="comment">/* Get the Capture 1 Register value */</span>
<a name="l02452"></a>02452   <span class="keywordflow">return</span> TIMx-&gt;CCR1;
<a name="l02453"></a>02453 }
<a name="l02454"></a>02454 
<a name="l02460"></a><a class="code" href="group___t_i_m___private___functions.html#ga437fcf00ee9d0a9df9150cc120efc5ad">02460</a> uint16_t <a class="code" href="group___t_i_m___private___functions.html#ga437fcf00ee9d0a9df9150cc120efc5ad" title="Gets the TIMx Input Capture 2 value.">TIM_GetCapture2</a>(TIM_TypeDef* TIMx)
<a name="l02461"></a>02461 {
<a name="l02462"></a>02462   <span class="comment">/* Check the parameters */</span>
<a name="l02463"></a>02463   assert_param(IS_TIM_LIST6_PERIPH(TIMx));
<a name="l02464"></a>02464   <span class="comment">/* Get the Capture 2 Register value */</span>
<a name="l02465"></a>02465   <span class="keywordflow">return</span> TIMx-&gt;CCR2;
<a name="l02466"></a>02466 }
<a name="l02467"></a>02467 
<a name="l02473"></a><a class="code" href="group___t_i_m___private___functions.html#gab71d1d3d8a15f3be9e74dca51fcca5fa">02473</a> uint16_t <a class="code" href="group___t_i_m___private___functions.html#gab71d1d3d8a15f3be9e74dca51fcca5fa" title="Gets the TIMx Input Capture 3 value.">TIM_GetCapture3</a>(TIM_TypeDef* TIMx)
<a name="l02474"></a>02474 {
<a name="l02475"></a>02475   <span class="comment">/* Check the parameters */</span>
<a name="l02476"></a>02476   assert_param(IS_TIM_LIST3_PERIPH(TIMx)); 
<a name="l02477"></a>02477   <span class="comment">/* Get the Capture 3 Register value */</span>
<a name="l02478"></a>02478   <span class="keywordflow">return</span> TIMx-&gt;CCR3;
<a name="l02479"></a>02479 }
<a name="l02480"></a>02480 
<a name="l02486"></a><a class="code" href="group___t_i_m___private___functions.html#ga09049af04c8345849c6f82ccfae242a6">02486</a> uint16_t <a class="code" href="group___t_i_m___private___functions.html#ga09049af04c8345849c6f82ccfae242a6" title="Gets the TIMx Input Capture 4 value.">TIM_GetCapture4</a>(TIM_TypeDef* TIMx)
<a name="l02487"></a>02487 {
<a name="l02488"></a>02488   <span class="comment">/* Check the parameters */</span>
<a name="l02489"></a>02489   assert_param(IS_TIM_LIST3_PERIPH(TIMx));
<a name="l02490"></a>02490   <span class="comment">/* Get the Capture 4 Register value */</span>
<a name="l02491"></a>02491   <span class="keywordflow">return</span> TIMx-&gt;CCR4;
<a name="l02492"></a>02492 }
<a name="l02493"></a>02493 
<a name="l02499"></a><a class="code" href="group___t_i_m___private___functions.html#gab6826b144ae70e206f51ae8af5318a93">02499</a> uint16_t <a class="code" href="group___t_i_m___private___functions.html#gab6826b144ae70e206f51ae8af5318a93" title="Gets the TIMx Counter value.">TIM_GetCounter</a>(TIM_TypeDef* TIMx)
<a name="l02500"></a>02500 {
<a name="l02501"></a>02501   <span class="comment">/* Check the parameters */</span>
<a name="l02502"></a>02502   assert_param(IS_TIM_ALL_PERIPH(TIMx));
<a name="l02503"></a>02503   <span class="comment">/* Get the Counter Register value */</span>
<a name="l02504"></a>02504   <span class="keywordflow">return</span> TIMx-&gt;CNT;
<a name="l02505"></a>02505 }
<a name="l02506"></a>02506 
<a name="l02512"></a><a class="code" href="group___t_i_m___private___functions.html#ga427eb6e533480e02a27cd0ca876183d6">02512</a> uint16_t <a class="code" href="group___t_i_m___private___functions.html#ga427eb6e533480e02a27cd0ca876183d6" title="Gets the TIMx Prescaler value.">TIM_GetPrescaler</a>(TIM_TypeDef* TIMx)
<a name="l02513"></a>02513 {
<a name="l02514"></a>02514   <span class="comment">/* Check the parameters */</span>
<a name="l02515"></a>02515   assert_param(IS_TIM_ALL_PERIPH(TIMx));
<a name="l02516"></a>02516   <span class="comment">/* Get the Prescaler Register value */</span>
<a name="l02517"></a>02517   <span class="keywordflow">return</span> TIMx-&gt;PSC;
<a name="l02518"></a>02518 }
<a name="l02519"></a>02519 
<a name="l02546"></a><a class="code" href="group___t_i_m___private___functions.html#ga0adcbbd5e838ec8642e7a9b80075f41f">02546</a> FlagStatus <a class="code" href="group___t_i_m___private___functions.html#ga0adcbbd5e838ec8642e7a9b80075f41f" title="Checks whether the specified TIM flag is set or not.">TIM_GetFlagStatus</a>(TIM_TypeDef* TIMx, uint16_t TIM_FLAG)
<a name="l02547"></a>02547 { 
<a name="l02548"></a>02548   ITStatus bitstatus = RESET;  
<a name="l02549"></a>02549   <span class="comment">/* Check the parameters */</span>
<a name="l02550"></a>02550   assert_param(IS_TIM_ALL_PERIPH(TIMx));
<a name="l02551"></a>02551   assert_param(IS_TIM_GET_FLAG(TIM_FLAG));
<a name="l02552"></a>02552   
<a name="l02553"></a>02553   <span class="keywordflow">if</span> ((TIMx-&gt;SR &amp; TIM_FLAG) != (uint16_t)RESET)
<a name="l02554"></a>02554   {
<a name="l02555"></a>02555     bitstatus = SET;
<a name="l02556"></a>02556   }
<a name="l02557"></a>02557   <span class="keywordflow">else</span>
<a name="l02558"></a>02558   {
<a name="l02559"></a>02559     bitstatus = RESET;
<a name="l02560"></a>02560   }
<a name="l02561"></a>02561   <span class="keywordflow">return</span> bitstatus;
<a name="l02562"></a>02562 }
<a name="l02563"></a>02563 
<a name="l02590"></a><a class="code" href="group___t_i_m___private___functions.html#ga46568c7b254941dc53e785342d60baf3">02590</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga46568c7b254941dc53e785342d60baf3" title="Clears the TIMx&amp;#39;s pending flags.">TIM_ClearFlag</a>(TIM_TypeDef* TIMx, uint16_t TIM_FLAG)
<a name="l02591"></a>02591 {  
<a name="l02592"></a>02592   <span class="comment">/* Check the parameters */</span>
<a name="l02593"></a>02593   assert_param(IS_TIM_ALL_PERIPH(TIMx));
<a name="l02594"></a>02594   assert_param(IS_TIM_CLEAR_FLAG(TIM_FLAG));
<a name="l02595"></a>02595    
<a name="l02596"></a>02596   <span class="comment">/* Clear the flags */</span>
<a name="l02597"></a>02597   TIMx-&gt;SR = (uint16_t)~TIM_FLAG;
<a name="l02598"></a>02598 }
<a name="l02599"></a>02599 
<a name="l02622"></a><a class="code" href="group___t_i_m___private___functions.html#ga0827a0b411707304f76d33050727c24d">02622</a> ITStatus <a class="code" href="group___t_i_m___private___functions.html#ga0827a0b411707304f76d33050727c24d" title="Checks whether the TIM interrupt has occurred or not.">TIM_GetITStatus</a>(TIM_TypeDef* TIMx, uint16_t TIM_IT)
<a name="l02623"></a>02623 {
<a name="l02624"></a>02624   ITStatus bitstatus = RESET;  
<a name="l02625"></a>02625   uint16_t itstatus = 0x0, itenable = 0x0;
<a name="l02626"></a>02626   <span class="comment">/* Check the parameters */</span>
<a name="l02627"></a>02627   assert_param(IS_TIM_ALL_PERIPH(TIMx));
<a name="l02628"></a>02628   assert_param(IS_TIM_GET_IT(TIM_IT));
<a name="l02629"></a>02629    
<a name="l02630"></a>02630   itstatus = TIMx-&gt;SR &amp; TIM_IT;
<a name="l02631"></a>02631   
<a name="l02632"></a>02632   itenable = TIMx-&gt;DIER &amp; TIM_IT;
<a name="l02633"></a>02633   <span class="keywordflow">if</span> ((itstatus != (uint16_t)RESET) &amp;&amp; (itenable != (uint16_t)RESET))
<a name="l02634"></a>02634   {
<a name="l02635"></a>02635     bitstatus = SET;
<a name="l02636"></a>02636   }
<a name="l02637"></a>02637   <span class="keywordflow">else</span>
<a name="l02638"></a>02638   {
<a name="l02639"></a>02639     bitstatus = RESET;
<a name="l02640"></a>02640   }
<a name="l02641"></a>02641   <span class="keywordflow">return</span> bitstatus;
<a name="l02642"></a>02642 }
<a name="l02643"></a>02643 
<a name="l02666"></a><a class="code" href="group___t_i_m___private___functions.html#ga9eb1e95af71ed380f51a2c6d585cc5d6">02666</a> <span class="keywordtype">void</span> <a class="code" href="group___t_i_m___private___functions.html#ga9eb1e95af71ed380f51a2c6d585cc5d6" title="Clears the TIMx&amp;#39;s interrupt pending bits.">TIM_ClearITPendingBit</a>(TIM_TypeDef* TIMx, uint16_t TIM_IT)
<a name="l02667"></a>02667 {
<a name="l02668"></a>02668   <span class="comment">/* Check the parameters */</span>
<a name="l02669"></a>02669   assert_param(IS_TIM_ALL_PERIPH(TIMx));
<a name="l02670"></a>02670   assert_param(IS_TIM_IT(TIM_IT));
<a name="l02671"></a>02671   <span class="comment">/* Clear the IT pending Bit */</span>
<a name="l02672"></a>02672   TIMx-&gt;SR = (uint16_t)~TIM_IT;
<a name="l02673"></a>02673 }
<a name="l02674"></a>02674 
<a name="l02691"></a>02691 <span class="keyword">static</span> <span class="keywordtype">void</span> TI1_Config(TIM_TypeDef* TIMx, uint16_t TIM_ICPolarity, uint16_t TIM_ICSelection,
<a name="l02692"></a>02692                        uint16_t TIM_ICFilter)
<a name="l02693"></a>02693 {
<a name="l02694"></a>02694   uint16_t tmpccmr1 = 0, tmpccer = 0;
<a name="l02695"></a>02695   <span class="comment">/* Disable the Channel 1: Reset the CC1E Bit */</span>
<a name="l02696"></a>02696   TIMx-&gt;CCER &amp;= (uint16_t)~((uint16_t)TIM_CCER_CC1E);
<a name="l02697"></a>02697   tmpccmr1 = TIMx-&gt;CCMR1;
<a name="l02698"></a>02698   tmpccer = TIMx-&gt;CCER;
<a name="l02699"></a>02699   <span class="comment">/* Select the Input and set the filter */</span>
<a name="l02700"></a>02700   tmpccmr1 &amp;= (uint16_t)(((uint16_t)~((uint16_t)TIM_CCMR1_CC1S)) &amp; ((uint16_t)~((uint16_t)TIM_CCMR1_IC1F)));
<a name="l02701"></a>02701   tmpccmr1 |= (uint16_t)(TIM_ICSelection | (uint16_t)(TIM_ICFilter &lt;&lt; (uint16_t)4));
<a name="l02702"></a>02702   <span class="comment">/* Select the Polarity and set the CC1E Bit */</span>
<a name="l02703"></a>02703   tmpccer &amp;= (uint16_t)~((uint16_t)(TIM_CCER_CC1P));
<a name="l02704"></a>02704   tmpccer |= (uint16_t)(TIM_ICPolarity | (uint16_t)TIM_CCER_CC1E);
<a name="l02705"></a>02705   <span class="comment">/* Write to TIMx CCMR1 and CCER registers */</span>
<a name="l02706"></a>02706   TIMx-&gt;CCMR1 = tmpccmr1;
<a name="l02707"></a>02707   TIMx-&gt;CCER = tmpccer;
<a name="l02708"></a>02708 }
<a name="l02709"></a>02709 
<a name="l02726"></a>02726 <span class="keyword">static</span> <span class="keywordtype">void</span> TI2_Config(TIM_TypeDef* TIMx, uint16_t TIM_ICPolarity, uint16_t TIM_ICSelection,
<a name="l02727"></a>02727                        uint16_t TIM_ICFilter)
<a name="l02728"></a>02728 {
<a name="l02729"></a>02729   uint16_t tmpccmr1 = 0, tmpccer = 0, tmp = 0;
<a name="l02730"></a>02730   <span class="comment">/* Disable the Channel 2: Reset the CC2E Bit */</span>
<a name="l02731"></a>02731   TIMx-&gt;CCER &amp;= (uint16_t)~((uint16_t)TIM_CCER_CC2E);
<a name="l02732"></a>02732   tmpccmr1 = TIMx-&gt;CCMR1;
<a name="l02733"></a>02733   tmpccer = TIMx-&gt;CCER;
<a name="l02734"></a>02734   tmp = (uint16_t)(TIM_ICPolarity &lt;&lt; 4);
<a name="l02735"></a>02735   <span class="comment">/* Select the Input and set the filter */</span>
<a name="l02736"></a>02736   tmpccmr1 &amp;= (uint16_t)(((uint16_t)~((uint16_t)TIM_CCMR1_CC2S)) &amp; ((uint16_t)~((uint16_t)TIM_CCMR1_IC2F)));
<a name="l02737"></a>02737   tmpccmr1 |= (uint16_t)(TIM_ICFilter &lt;&lt; 12);
<a name="l02738"></a>02738   tmpccmr1 |= (uint16_t)(TIM_ICSelection &lt;&lt; 8);
<a name="l02739"></a>02739   <span class="comment">/* Select the Polarity and set the CC2E Bit */</span>
<a name="l02740"></a>02740    tmpccer &amp;= (uint16_t)~((uint16_t)(TIM_CCER_CC2P));
<a name="l02741"></a>02741   tmpccer |=  (uint16_t)(tmp | (uint16_t)TIM_CCER_CC2E);
<a name="l02742"></a>02742   <span class="comment">/* Write to TIMx CCMR1 and CCER registers */</span>
<a name="l02743"></a>02743   TIMx-&gt;CCMR1 = tmpccmr1 ;
<a name="l02744"></a>02744   TIMx-&gt;CCER = tmpccer;
<a name="l02745"></a>02745 }
<a name="l02746"></a>02746 
<a name="l02763"></a>02763 <span class="keyword">static</span> <span class="keywordtype">void</span> TI3_Config(TIM_TypeDef* TIMx, uint16_t TIM_ICPolarity, uint16_t TIM_ICSelection,
<a name="l02764"></a>02764                        uint16_t TIM_ICFilter)
<a name="l02765"></a>02765 {
<a name="l02766"></a>02766   uint16_t tmpccmr2 = 0, tmpccer = 0, tmp = 0;
<a name="l02767"></a>02767   <span class="comment">/* Disable the Channel 3: Reset the CC3E Bit */</span>
<a name="l02768"></a>02768   TIMx-&gt;CCER &amp;= (uint16_t)~((uint16_t)TIM_CCER_CC3E);
<a name="l02769"></a>02769   tmpccmr2 = TIMx-&gt;CCMR2;
<a name="l02770"></a>02770   tmpccer = TIMx-&gt;CCER;
<a name="l02771"></a>02771   tmp = (uint16_t)(TIM_ICPolarity &lt;&lt; 8);
<a name="l02772"></a>02772   <span class="comment">/* Select the Input and set the filter */</span>
<a name="l02773"></a>02773   tmpccmr2 &amp;= (uint16_t)(((uint16_t)~((uint16_t)TIM_CCMR2_CC3S)) &amp; ((uint16_t)~((uint16_t)TIM_CCMR2_IC3F)));
<a name="l02774"></a>02774   tmpccmr2 |= (uint16_t)(TIM_ICSelection | (uint16_t)(TIM_ICFilter &lt;&lt; (uint16_t)4));
<a name="l02775"></a>02775   <span class="comment">/* Select the Polarity and set the CC3E Bit */</span>
<a name="l02776"></a>02776   tmpccer &amp;= (uint16_t)~((uint16_t)(TIM_CCER_CC3P));
<a name="l02777"></a>02777   tmpccer |= (uint16_t)(tmp | (uint16_t)TIM_CCER_CC3E);
<a name="l02778"></a>02778   <span class="comment">/* Write to TIMx CCMR2 and CCER registers */</span>
<a name="l02779"></a>02779   TIMx-&gt;CCMR2 = tmpccmr2;
<a name="l02780"></a>02780   TIMx-&gt;CCER = tmpccer;
<a name="l02781"></a>02781 }
<a name="l02782"></a>02782 
<a name="l02799"></a>02799 <span class="keyword">static</span> <span class="keywordtype">void</span> TI4_Config(TIM_TypeDef* TIMx, uint16_t TIM_ICPolarity, uint16_t TIM_ICSelection,
<a name="l02800"></a>02800                        uint16_t TIM_ICFilter)
<a name="l02801"></a>02801 {
<a name="l02802"></a>02802   uint16_t tmpccmr2 = 0, tmpccer = 0, tmp = 0;
<a name="l02803"></a>02803 
<a name="l02804"></a>02804    <span class="comment">/* Disable the Channel 4: Reset the CC4E Bit */</span>
<a name="l02805"></a>02805   TIMx-&gt;CCER &amp;= (uint16_t)~((uint16_t)TIM_CCER_CC4E);
<a name="l02806"></a>02806   tmpccmr2 = TIMx-&gt;CCMR2;
<a name="l02807"></a>02807   tmpccer = TIMx-&gt;CCER;
<a name="l02808"></a>02808   tmp = (uint16_t)(TIM_ICPolarity &lt;&lt; 12);
<a name="l02809"></a>02809   <span class="comment">/* Select the Input and set the filter */</span>
<a name="l02810"></a>02810   tmpccmr2 &amp;= (uint16_t)((uint16_t)(~(uint16_t)TIM_CCMR2_CC4S) &amp; ((uint16_t)~((uint16_t)TIM_CCMR2_IC4F)));
<a name="l02811"></a>02811   tmpccmr2 |= (uint16_t)(TIM_ICSelection &lt;&lt; 8);
<a name="l02812"></a>02812   tmpccmr2 |= (uint16_t)(TIM_ICFilter &lt;&lt; 12);
<a name="l02813"></a>02813 
<a name="l02814"></a>02814   <span class="comment">/* Select the Polarity and set the CC4E Bit */</span>
<a name="l02815"></a>02815   tmpccer &amp;= (uint16_t)~((uint16_t)(TIM_CCER_CC4P));
<a name="l02816"></a>02816   tmpccer |= (uint16_t)(tmp | (uint16_t)TIM_CCER_CC4E);
<a name="l02817"></a>02817   <span class="comment">/* Write to TIMx CCMR2 and CCER registers */</span>
<a name="l02818"></a>02818   TIMx-&gt;CCMR2 = tmpccmr2;
<a name="l02819"></a>02819   TIMx-&gt;CCER = tmpccer;
<a name="l02820"></a>02820 }
<a name="l02821"></a>02821 
<a name="l02834"></a>02834 <span class="comment">/******************* (C) COPYRIGHT 2010 STMicroelectronics *****END OF FILE****/</span>
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated on Tue Sep 21 14:19:38 2010 for ST-TIM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
